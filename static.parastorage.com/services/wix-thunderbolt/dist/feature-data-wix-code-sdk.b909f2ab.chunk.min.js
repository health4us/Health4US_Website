(self.webpackJsonp__wix_thunderbolt_app = self.webpackJsonp__wix_thunderbolt_app || []).push([
    [6540], {
        95436: function(t) {
            "use strict";

            function e(t) {
                return e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                    return typeof t
                } : function(t) {
                    return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
                }, e(t)
            }
            var r = "User",
                n = "Error",
                i = "EDM",
                o = function(t, r) {
                    t && "object" === e(t) && (t.errorGroup = r)
                };
            t.exports = {
                markUserError: function(t) {
                    return o(t, r)
                },
                isUserError: function(t) {
                    return t && t.errorGroup === r
                },
                markAppError: function(t) {
                    return o(t, n)
                },
                isAppError: function(t) {
                    return t && t.errorGroup === n
                },
                markEdmError: function(t) {
                    return o(t, i)
                },
                isEdmError: function(t) {
                    return t && t.errorGroup === i
                },
                markError: o,
                isMarked: function(t) {
                    return !!t && void 0 !== t.errorGroup
                },
                USER_ERROR_GROUP: r,
                APP_ERROR_GROUP: n,
                EDM_ERROR_GROUP: i,
                UNKNOWN_ERROR_GROUP: "Unknown"
            }
        },
        61176: function(t, e, r) {
            "use strict";

            function n(t) {
                return n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                    return typeof t
                } : function(t) {
                    return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
                }, n(t)
            }

            function i(t, e) {
                for (var r = 0; r < e.length; r++) {
                    var n = e[r];
                    n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(t, n.key, n)
                }
            }

            function o(t, e) {
                return o = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t, e) {
                    return t.__proto__ = e, t
                }, o(t, e)
            }

            function a(t) {
                var e = function() {
                    if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
                    if (Reflect.construct.sham) return !1;
                    if ("function" == typeof Proxy) return !0;
                    try {
                        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}))), !0
                    } catch (t) {
                        return !1
                    }
                }();
                return function() {
                    var r, i = c(t);
                    if (e) {
                        var o = c(this).constructor;
                        r = Reflect.construct(i, arguments, o)
                    } else r = i.apply(this, arguments);
                    return function(t, e) {
                        if (e && ("object" === n(e) || "function" == typeof e)) return e;
                        if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
                        return u(t)
                    }(this, r)
                }
            }

            function u(t) {
                if (void 0 === t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return t
            }

            function c(t) {
                return c = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(t) {
                    return t.__proto__ || Object.getPrototypeOf(t)
                }, c(t)
            }
            var s = r(95436),
                l = function(t) {
                    ! function(t, e) {
                        if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
                        t.prototype = Object.create(e && e.prototype, {
                            constructor: {
                                value: t,
                                writable: !0,
                                configurable: !0
                            }
                        }), Object.defineProperty(t, "prototype", {
                            writable: !1
                        }), e && o(t, e)
                    }(l, t);
                    var e, r, n, c = a(l);

                    function l() {
                        var t;
                        ! function(t, e) {
                            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
                        }(this, l);
                        for (var e = arguments.length, r = new Array(e), n = 0; n < e; n++) r[n] = arguments[n];
                        return t = c.call.apply(c, [this].concat(r)), Error.captureStackTrace && Error.captureStackTrace(u(t), t.constructor), t.name = l.name, s.markUserError(u(t)), t
                    }
                    return e = l, r && i(e.prototype, r), n && i(e, n), Object.defineProperty(e, "prototype", {
                        writable: !1
                    }), e
                }(function(t) {
                    function e() {
                        var e = Reflect.construct(t, Array.from(arguments));
                        return Object.setPrototypeOf(e, Object.getPrototypeOf(this)), e
                    }
                    return e.prototype = Object.create(t.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }), Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t, e
                }(Error));
            t.exports = {
                UserCodeError: l
            }
        },
        83584: function(t, e, r) {
            "use strict";

            function n(t, e) {
                var r = Object.keys(t);
                if (Object.getOwnPropertySymbols) {
                    var n = Object.getOwnPropertySymbols(t);
                    e && (n = n.filter((function(e) {
                        return Object.getOwnPropertyDescriptor(t, e).enumerable
                    }))), r.push.apply(r, n)
                }
                return r
            }

            function i(t) {
                for (var e = 1; e < arguments.length; e++) {
                    var r = null != arguments[e] ? arguments[e] : {};
                    e % 2 ? n(Object(r), !0).forEach((function(e) {
                        o(t, e, r[e])
                    })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : n(Object(r)).forEach((function(e) {
                        Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(r, e))
                    }))
                }
                return t
            }

            function o(t, e, r) {
                return e in t ? Object.defineProperty(t, e, {
                    value: r,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : t[e] = r, t
            }
            var a = r(95436),
                u = r(61176);
            t.exports = i(i({}, u), a)
        },
        18496: function(t) {
            var e = Object.prototype.toString;
            t.exports = function(t) {
                var r = typeof t;
                return "undefined" === r ? "undefined" : null === t ? "null" : !0 === t || !1 === t || t instanceof Boolean ? "boolean" : "string" === r || t instanceof String ? "string" : "number" === r || t instanceof Number ? "number" : "function" === r || t instanceof Function ? void 0 !== t.constructor.name && "Generator" === t.constructor.name.slice(0, 9) ? "generatorfunction" : "function" : void 0 !== Array.isArray && Array.isArray(t) ? "array" : t instanceof RegExp ? "regexp" : t instanceof Date ? "date" : "[object RegExp]" === (r = e.call(t)) ? "regexp" : "[object Date]" === r ? "date" : "[object Arguments]" === r ? "arguments" : "[object Error]" === r ? "error" : "[object Promise]" === r ? "promise" : function(t) {
                    return t.constructor && "function" == typeof t.constructor.isBuffer && t.constructor.isBuffer(t)
                }(t) ? "buffer" : "[object Set]" === r ? "set" : "[object WeakSet]" === r ? "weakset" : "[object Map]" === r ? "map" : "[object WeakMap]" === r ? "weakmap" : "[object Symbol]" === r ? "symbol" : "[object Map Iterator]" === r ? "mapiterator" : "[object Set Iterator]" === r ? "setiterator" : "[object String Iterator]" === r ? "stringiterator" : "[object Array Iterator]" === r ? "arrayiterator" : "[object Int8Array]" === r ? "int8array" : "[object Uint8Array]" === r ? "uint8array" : "[object Uint8ClampedArray]" === r ? "uint8clampedarray" : "[object Int16Array]" === r ? "int16array" : "[object Uint16Array]" === r ? "uint16array" : "[object Int32Array]" === r ? "int32array" : "[object Uint32Array]" === r ? "uint32array" : "[object Float32Array]" === r ? "float32array" : "[object Float64Array]" === r ? "float64array" : "object"
            }
        },
        13648: function(t, e, r) {
            "use strict";
            r.d(e, {
                ct: function() {
                    return d
                },
                mc: function() {
                    return _
                },
                c7: function() {
                    return a
                },
                am: function() {
                    return s
                },
                It: function() {
                    return u
                },
                Ib: function() {
                    return c
                },
                Y9: function() {
                    return o
                },
                L7: function() {
                    return l
                },
                LX: function() {
                    return v
                },
                uE: function() {
                    return g
                },
                op: function() {
                    return N
                },
                sr: function() {
                    return p
                }
            });
            var n = r(56128),
                i = r.n(n);

            function o(t) {
                return "object" === i()(t)
            }

            function a(t) {
                return "array" === i()(t)
            }

            function u(t) {
                return "date" === i()(t)
            }

            function c(t) {
                return "number" === i()(t)
            }

            function s(t) {
                return "boolean" === i()(t)
            }

            function l(t) {
                return "string" === i()(t)
            }

            function p(t) {
                return function(t) {
                    if (!l(t)) return t;
                    var e = t.slice(0, 1).toUpperCase(),
                        r = t.slice(1, t.length);
                    return e + r
                }(i()(t))
            }

            function d(t) {
                if (null == t || "object" != typeof t) return t;
                var e = null;
                if (u(t)) e = new Date(t.getTime());
                else
                    for (var r in e = t.constructor(), t) e[r] = d(t[r]);
                return e
            }
            var f = r(13944);

            function h(t) {
                return "[object Date]" === Object.prototype.toString.call(t) && !isNaN(t.getTime())
            }
            var m = function(t) {
                return isNaN(t) && !isNaN(new Date(t).getDate())
            };

            function v(t) {
                if ("object" != typeof t || h(t)) return t;
                var e = b(t);
                for (var r in e) e[r] && e[r].$date && m(e[r].$date) ? e[r] = new Date(e[r].$date) : "object" == typeof e[r] && null !== e[r] && (e[r] = v(e[r]));
                return e
            }

            function g(t) {
                if ("object" != typeof t || h(t)) return t;
                var e = b(t);
                for (var r in e) e[r] && h(e[r]) ? e[r] = y(e[r]) : "object" == typeof e[r] && null !== e[r] && (e[r] = g(e[r]));
                return e
            }

            function y(t) {
                return {
                    $date: t.toJSON()
                }
            }

            function b(t) {
                return Array.isArray(t) ? Object.assign([], t) : (0, f.C3)({}, t)
            }

            function N(t) {
                return t.reduce((function(t, e, r) {
                    var n = Object.entries(e)[0],
                        i = n[0],
                        o = n[1];
                    return "$match" === i && 0 === r ? {
                        preFilteringStep: o
                    } : "$match" === i ? (0, f.C3)((0, f.C3)({}, t), {
                        postFilteringStep: o
                    }) : "$group" === i ? (0, f.C3)((0, f.C3)({}, t), {
                        processingStep: o
                    }) : t
                }), {})
            }

            function _(t) {
                var e = t.lastIndexOf("/");
                return e > -1 ? t.substring(0, e) : null
            }
        },
        56128: function(t) {
            var e = Object.prototype.toString;
            t.exports = function(t) {
                var r = typeof t;
                return "undefined" === r ? "undefined" : null === t ? "null" : !0 === t || !1 === t || t instanceof Boolean ? "boolean" : "string" === r || t instanceof String ? "string" : "number" === r || t instanceof Number ? "number" : "function" === r || t instanceof Function ? void 0 !== t.constructor.name && "Generator" === t.constructor.name.slice(0, 9) ? "generatorfunction" : "function" : void 0 !== Array.isArray && Array.isArray(t) ? "array" : t instanceof RegExp ? "regexp" : t instanceof Date ? "date" : "[object RegExp]" === (r = e.call(t)) ? "regexp" : "[object Date]" === r ? "date" : "[object Arguments]" === r ? "arguments" : "[object Error]" === r ? "error" : "[object Promise]" === r ? "promise" : function(t) {
                    return t.constructor && "function" == typeof t.constructor.isBuffer && t.constructor.isBuffer(t)
                }(t) ? "buffer" : "[object Set]" === r ? "set" : "[object WeakSet]" === r ? "weakset" : "[object Map]" === r ? "map" : "[object WeakMap]" === r ? "weakmap" : "[object Symbol]" === r ? "symbol" : "[object Map Iterator]" === r ? "mapiterator" : "[object Set Iterator]" === r ? "setiterator" : "[object String Iterator]" === r ? "stringiterator" : "[object Array Iterator]" === r ? "arrayiterator" : "[object Int8Array]" === r ? "int8array" : "[object Uint8Array]" === r ? "uint8array" : "[object Uint8ClampedArray]" === r ? "uint8clampedarray" : "[object Int16Array]" === r ? "int16array" : "[object Uint16Array]" === r ? "uint16array" : "[object Int32Array]" === r ? "int32array" : "[object Uint32Array]" === r ? "uint32array" : "[object Float32Array]" === r ? "float32array" : "[object Float64Array]" === r ? "float64array" : "object"
            }
        },
        43096: function(t) {
            var e = Object.prototype.hasOwnProperty;

            function r(t) {
                return "[Throws: " + (t ? t.message : "?") + "]"
            }

            function n(t) {
                var n = [];
                return function t(i) {
                    if (null === i || "object" != typeof i) return i;
                    if (-1 !== n.indexOf(i)) return "[Circular]";
                    if (n.push(i), "function" == typeof i.toJSON) try {
                        var o = t(i.toJSON());
                        return n.pop(), o
                    } catch (t) {
                        return r(t)
                    }
                    if (Array.isArray(i)) {
                        var a = i.map(t);
                        return n.pop(), a
                    }
                    var u = Object.keys(i).reduce((function(n, o) {
                        return n[o] = t(function(t, n) {
                            if (e.call(t, n)) try {
                                return t[n]
                            } catch (t) {
                                return r(t)
                            }
                            return t[n]
                        }(i, o)), n
                    }), {});
                    return n.pop(), u
                }(t)
            }
            t.exports = function(t, e, r) {
                return JSON.stringify(n(t), e, r)
            }, t.exports.ensureProperties = n
        },
        53268: function(t, e, r) {
            "use strict";
            r.d(e, {
                DataSdkFactory: function() {
                    return ce
                }
            });
            var n = r(13944),
                i = r(13648),
                o = r(83584),
                a = r(43096),
                u = r.n(a);

            function c(t) {
                return u()(t)
            }
            var s = function() {
                    return "WDE0001: Collection name must be a string."
                },
                l = function() {
                    return "WDE0002: ItemId must be a string."
                },
                p = function() {
                    return "WDE0068: Item ids must be an array of strings"
                },
                d = function(t) {
                    return "WDE0069: Failed to remove items from [".concat(t, "].\nCannot remove more than 1000 items in one request")
                },
                f = function() {
                    return "WDE0003: FieldName must be a string."
                },
                h = function(t, e) {
                    return "WDE0004: Failed to save [".concat(t, "] into [").concat(e, "].\nItems must be JavaScript objects.")
                },
                m = function(t) {
                    return "WDE0005: Failed to bulk save items into [".concat(t, "].\nItems must be an array of JavaScript objects and itemIds must be strings if present.")
                },
                v = function(t) {
                    return "WDE0006: Failed to bulk save items into [".concat(t, "].\nCannot insert more than 1000 items in one request")
                },
                g = function() {
                    return "WDE0007: Invalid update. Updated object must have a string _id property."
                },
                y = function(t, e, r, n) {
                    return "WDE0008: wixData.".concat(t, " expects between ").concat(e, " and ").concat(r, " arguments, but was called with ").concat(n, ".")
                },
                b = {
                    aggregateInvalid: function(t, e) {
                        return "Failed to perform aggregation on [".concat(t, "].\n").concat(e.join("\n"))
                    },
                    filterMustBeBuilder: function(t) {
                        return "WDE0011: Invalid ".concat(t, " usage. ").concat(t, " requires WixDataFilter.")
                    },
                    filterIsAlreadySet: function(t) {
                        return "WDE0012: Invalid ".concat(t, " usage. Filter is already set.")
                    },
                    groupIsAlreadySet: function(t) {
                        return "WDE0013: Invalid ".concat(t, " usage. Group is already set.")
                    }
                },
                N = function(t) {
                    return "Failed to build a filter.\n".concat(t.join("\n"), ".")
                },
                _ = function(t) {
                    return "Failed to build group.\n".concat(t.join("\n"), ".")
                },
                I = function(t) {
                    return "Failed to build a sort.\n".concat(t.join("\n"), ".")
                },
                A = function(t) {
                    return "WDE0018: Options must be an object with one or all of the following boolean properties: ".concat(t.join(", "), ".")
                },
                j = function() {
                    return "WDE0019: Reference operation takes a string ID or an object with an ID to be connected."
                },
                O = function() {
                    return "WDE0021: Invalid reference"
                },
                E = {
                    queryInvalid: function(t, e) {
                        return "Failed to perform query on [".concat(t, "].\n").concat(e.join("\n"))
                    },
                    isNumber: function(t, e, r) {
                        return "WDE0032: Invalid ".concat(t, " parameter [").concat((0, i.sr)(r), "]. ").concat(t, " parameter must be a ").concat(e, " number.")
                    },
                    isPositiveNumber: function(t, e) {
                        return "WDE0033: Invalid ".concat(t, " parameter [").concat(e, "]. ").concat(t, " parameter must be a positive number.")
                    },
                    isNonNegativeNumber: function(t, e) {
                        return "WDE0034: Invalid ".concat(t, " parameter [").concat(e, "]. ").concat(t, " parameter must be a non-negative number.")
                    },
                    isInteger: function(t, e) {
                        return "WDE0035: Invalid ".concat(t, " parameter [").concat(e, "]. ").concat(t, " parameter must be an integer.")
                    },
                    isNonEmptyString: function(t) {
                        return "WDE0094: Invalid ".concat(t, " parameter. ").concat(t, " parameter must be non-empty string.")
                    },
                    notGreaterThan: function(t, e, r) {
                        return "WDE0036: Invalid ".concat(t, " parameter [").concat(e, "]. ").concat(t, " parameter cannot exceed ").concat(r, ".")
                    },
                    invalidSkipParameter: function(t, e) {
                        return "WDE0037: Invalid query on [".concat(t, "].\nInvalid prev positioned query skip on a negative number ").concat(e, ".")
                    },
                    noPrevPage: function(t) {
                        return "WDE0159: Invalid query on [".concat(t, "].\nThere is no prev page.")
                    },
                    noNextPage: function(t) {
                        return "WDE0165: Invalid query on [".concat(t, "].\nThere is no next page.")
                    }
                },
                C = {
                    arityIsZero: function(t) {
                        return "WDE0038: Invalid ".concat(t, " usage. ").concat(t, " does not take parameters.")
                    },
                    arityIsOne: function(t) {
                        return "WDE0039: Invalid ".concat(t, " usage. ").concat(t, " requires one parameter.")
                    },
                    arityIsTwo: function(t) {
                        return "WDE0040: Invalid ".concat(t, " usage. ").concat(t, " requires two parameters.")
                    },
                    arityIsThree: function(t) {
                        return "WDE0041: Invalid ".concat(t, " usage. ").concat(t, " requires three parameters.")
                    },
                    arityIsAtLeastTwo: function(t) {
                        return "WDE0042: Invalid ".concat(t, " usage. ").concat(t, " requires at least two parameters.")
                    },
                    arityIsAtLeastOne: function(t) {
                        return "WDE0043: Invalid ".concat(t, " usage. ").concat(t, " requires at least one parameter.")
                    }
                },
                w = {
                    typeIsString: function(t, e) {
                        return "WDE0044: Invalid ".concat(t, " parameter value [").concat((0, i.sr)(e), "]. ").concat(t, " parameter must be a String.")
                    },
                    typeIsStringNumberOrDate: function(t, e) {
                        return "WDE0045: Invalid ".concat(t, " parameter value [").concat((0, i.sr)(e), "]. Valid ").concat(t, " parameter types are String, Number or Date.")
                    },
                    sameType: function(t, e, r) {
                        return "WDE0046: Invalid ".concat(t, " parameter values [").concat((0, i.sr)(e), "] and [").concat((0, i.sr)(r), "]. Both parameters must be of the same type.")
                    },
                    typeIsStringNumberOrDateForAll: function(t) {
                        return "WDE0047: Invalid ".concat(t, " usage. ").concat(t, " supports only Number, String or Date items.")
                    },
                    validFieldName: function(t, e) {
                        return "WDE0048: Invalid ".concat(t, " field value [").concat((0, i.sr)(e), "]. ").concat(t, " field must be a String.")
                    },
                    isInstanceOfSameClass: function(t, e, r) {
                        return "WDE0049: Invalid ".concat(t, " parameter [").concat((0, i.sr)(r), "]. ").concat(t, " expects ").concat(e, " only.")
                    },
                    isForCollection: function(t, e, r) {
                        return "WDE0050: Invalid ".concat(t, " parameter query for [").concat(r, "]. ").concat(t, " accepts ").concat(e, " for the same collection only.")
                    },
                    incorrectDraftPublishFilter: function() {
                        return "WDE0093: Invalid filter for _publishStatus field, only .eq and .ne filters are allowed with 'DRAFT' and 'PUBLISHED' possible values."
                    }
                },
                P = {
                    objectType: function(t, e) {
                        return "WDE0056: ".concat(t, " should be an Object. Got ").concat(c(e), " instead")
                    },
                    arrayType: function(t, e) {
                        return "WDE0057: ".concat(t, " should be an Array. Got ").concat(c(e), " instead")
                    },
                    arrayLength: function(t, e, r) {
                        return "WDE0057: ".concat(c(r), ".length is ").concat(r.length, ". ").concat(t, " Array should have length ").concat(e)
                    },
                    comparisonOperatorType: function(t, e) {
                        return "WDE0058: ".concat(t, " should be a Date, Number, or String. Got ").concat(c(e), " instead")
                    },
                    stringOperatorType: function(t, e) {
                        return "WDE0059: ".concat(t, " should be a String. Got ").concat(c(e), " instead")
                    },
                    setOperatorItems: function(t, e) {
                        return "WDE0060: ".concat(t, " Array should only contain values of types Date, Number, and String. Got ").concat(c(e), " instead")
                    },
                    inOperatorItems: function(t) {
                        return "WDE0061: $in Array should have length 2, and match [String, Number]. Got ".concat(c(t), " instead")
                    },
                    matchesOperatorRequiredProperty: function(t, e) {
                        return "WDE0062: $matches value ".concat(c(e), " does not have property ").concat(t)
                    },
                    matchesOperatorIgnoreCase: function(t) {
                        return "WDE0063: $matches.ignoreCase should equal true. Got ".concat(c(t), " instead")
                    },
                    matchesOperatorSpecItems: function(t) {
                        return 'WDE0064: $matches.spec Array values should be either {"type":"anyOf","value":" -"} or {"type":"literal","value":String}. Got '.concat(c(t), " instead")
                    },
                    regexNotAllowed: function() {
                        return "WDE0070: $regex keyword is not allowed."
                    }
                },
                S = {
                    typeIsStringOrArrayOfStrings: function(t, e) {
                        return "WDE0051: Invalid ".concat(t, " parameters [").concat(e.map(i.sr), "]. Valid ").concat(t, " values are String, Array of String or varargs String.")
                    }
                },
                T = {
                    sortModelType: function(t) {
                        return "WDE0065: Sort Model should be an Array. Got ".concat(c(t), " instead")
                    },
                    sortModelItemType: function(t) {
                        return "WDE0066: Sort Model Array should contain values of type Object only. Got ".concat(c(t), " instead")
                    },
                    sortModelItem: function(t) {
                        return 'WDE0067: Sort Model Array items should have a single property with value "asc" or "desc". Got '.concat(c(t), " instead")
                    }
                },
                D = function(t) {
                    return "WDE0053: Internal wixData error: ".concat(t)
                },
                k = function() {
                    return "WDE0080: Skip is not supported in cursor paging."
                },
                W = function() {
                    return "WDE0109: Payload is too large."
                },
                x = {
                    ItemDoesNotExist: "WD_ITEM_DOES_NOT_EXIST",
                    ItemAlreadyExists: "WD_ITEM_ALREADY_EXISTS",
                    SiteInTemplateMode: "WD_SITE_IN_TEMPLATE_MODE",
                    UnknownError: "WD_UNKNOWN_ERROR",
                    ValidationError: "WD_VALIDATION_ERROR",
                    CollectionDeleted: "WD_COLLECTION_DELETED",
                    SchemaDoesNotExist: "WD_SCHEMA_DOES_NOT_EXIST",
                    PermissionDenied: "WD_PERMISSION_DENIED",
                    BadRequest: "WD_BAD_REQUEST",
                    Unauthorized: "WD_UNAUTHORIZED",
                    TooManyRequests: "WD_TOO_MANY_REQUESTS",
                    RequestTimedOut: "WD_REQUEST_TIMED_OUT",
                    QuotaExceeded: "WD_DATABASE_QUOTA_EXCEEDED",
                    QueryExecutionError: "WD_QUERY_EXECUTION_ERROR"
                };

            function R(t, e, r) {
                return F(t, e, r)
            }

            function $(t) {
                return F(t, x.ValidationError)
            }

            function F(t, e, r) {
                var n = new(e && e !== x.UnknownError ? V : Error)(t);
                return n.code = e, r && (n.details = r), n
            }

            function M(t, e, r, n, i) {
                var o = new Error(t);
                return n && (o.name = n), o.code = e, o.item = r, o.originalIndex = i, Object.setPrototypeOf(o, Object.getPrototypeOf(this)), Error.captureStackTrace && Error.captureStackTrace(o, M), o
            }

            function V(t) {
                var e = new o.UserCodeError(t);
                return Object.setPrototypeOf(e, Object.getPrototypeOf(this)), Error.captureStackTrace && Error.captureStackTrace(e, V), e.name = Error.name, e
            }
            M.prototype = Object.create(Error.prototype, {
                constructor: {
                    value: Error,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), V.prototype = Object.create(o.UserCodeError.prototype, {
                constructor: {
                    value: V,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            });
            var B = function() {
                    function t() {
                        this._validations = []
                    }
                    return t.prototype.arityIsZero = function(t) {
                        var e = this;
                        return this.addValidation((function() {
                            return 0 === t.length
                        }), (function() {
                            return C.arityIsZero(e.operatorName)
                        }))
                    }, t.prototype.arityIsOne = function(t) {
                        var e = this;
                        return this.addValidation((function() {
                            return 1 === t.length
                        }), (function() {
                            return C.arityIsOne(e.operatorName)
                        }))
                    }, t.prototype.arityIsTwo = function(t) {
                        var e = this;
                        return this.addValidation((function() {
                            return 2 === t.length
                        }), (function() {
                            return C.arityIsTwo(e.operatorName)
                        }))
                    }, t.prototype.arityIsThree = function(t) {
                        var e = this;
                        return this.addValidation((function() {
                            return 3 === t.length
                        }), (function() {
                            return C.arityIsThree(e.operatorName)
                        }))
                    }, t.prototype.arityIsAtLeastTwo = function(t) {
                        var e = this;
                        return this.addValidation((function() {
                            return t.length >= 2
                        }), (function() {
                            return C.arityIsAtLeastTwo(e.operatorName)
                        }))
                    }, t.prototype.arityIsAtLeastOne = function(t) {
                        var e = this;
                        return this.addValidation((function() {
                            return t.length >= 1
                        }), (function() {
                            return C.arityIsAtLeastOne(e.operatorName)
                        }))
                    }, t.prototype.addValidation = function(t, e) {
                        return this._validations.push({
                            predicateFn: t,
                            messageFn: e
                        }), this
                    }, t
                }(),
                q = function(t) {
                    function e(e) {
                        var r = t.call(this) || this;
                        return r._invalidArguments = (0, i.ct)(e), r
                    }
                    return (0, n.ct)(e, t), e.prototype.validateAndAggregate = function() {
                        var t = this,
                            e = this._validations.every((function(e) {
                                var r = e.predicateFn,
                                    n = e.messageFn;
                                return t._appendIfInvalid(r(), n())
                            }));
                        return [this._invalidArguments, e]
                    }, e.prototype._appendIfInvalid = function(t, e) {
                        return !!t || (this._invalidArguments.push(e), !1)
                    }, e
                }(B),
                U = function(t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return (0, n.ct)(e, t), e.prototype.validateAndReject = function() {
                        var t = this;
                        return Promise.resolve().then((function() {
                            t._validations.forEach((function(t) {
                                var e = t.predicateFn,
                                    r = t.messageFn;
                                if (!e()) throw $(r())
                            }))
                        }))
                    }, e
                }(B),
                L = function(t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return (0, n.ct)(e, t), e.prototype.arity = function(t, e, r, n) {
                        return this.addValidation((function() {
                            return e.length <= n && e.length >= r
                        }), (function() {
                            return y(t, r, n, e.length)
                        }))
                    }, e.prototype._isObject = function(t, e) {
                        return this.addValidation((function() {
                            return (0, i.Y9)(t)
                        }), (function() {
                            return h(t, e)
                        }))
                    }, e.prototype.item = function(t, e, r) {
                        return this._isObject(t, e).addValidation((function() {
                            return void 0 !== t._id ? (0, i.L7)(t._id) : !r
                        }), (function() {
                            return g()
                        }))
                    }, e.prototype.items = function(t, e) {
                        return this.addValidation((function() {
                            return (0, i.c7)(t) && t.every((function(t) {
                                return (0, i.Y9)(t) && (void 0 === t._id || null === t._id || (0, i.L7)(t._id))
                            }))
                        }), (function() {
                            return m(e)
                        })).addValidation((function() {
                            return t.length <= 1e3
                        }), (function() {
                            return v(e)
                        }))
                    }, e.prototype.fieldName = function(t) {
                        return this.addValidation((function() {
                            return (0, i.L7)(t)
                        }), (function() {
                            return f()
                        }))
                    }, e.prototype.itemId = function(t) {
                        return this.addValidation((function() {
                            return (0, i.L7)(t)
                        }), (function() {
                            return l()
                        }))
                    }, e.prototype.itemIds = function(t, e) {
                        return this.addValidation((function() {
                            return (0, i.c7)(t) && t.every((function(t) {
                                return (0, i.L7)(t)
                            }))
                        }), (function() {
                            return p()
                        })).addValidation((function() {
                            return t.length <= 1e3
                        }), (function() {
                            return d(e)
                        }))
                    }, e.prototype._options = function(t, e) {
                        return this.addValidation((function() {
                            var r = (0, i.Y9)(t) && e.every((function(e) {
                                return "language" === e ? null == (r = t[e]) || (0, i.L7)(r) && r.length > 0 : function(t) {
                                    return null == t || (0, i.am)(t)
                                }(t[e]);
                                var r
                            }));
                            return null == t || r
                        }), (function() {
                            return A(e)
                        }))
                    }, e.prototype.referenceRemoveParameters = function(t) {
                        return this.addValidation((function() {
                            return (0, i.c7)(t) && t.every(G)
                        }), j)
                    }, e.prototype.referenceParameters = function(t) {
                        return this.addValidation((function() {
                            return (0, i.c7)(t) && t.every(Q)
                        }), j)
                    }, e.prototype.referenceParameter = function(t) {
                        return this.addValidation((function() {
                            return Q(t)
                        }), j)
                    }, e.prototype.isNonEmptyString = function(t, e) {
                        return this.addValidation((function() {
                            return "string" == typeof t && t.length > 0
                        }), (function() {
                            return E.isNonEmptyString(e)
                        }))
                    }, e.prototype.references = function(t) {
                        return this.addValidation((function() {
                            return (0, i.c7)(t) && t.every((function(t) {
                                return (0, i.L7)(t.relationshipName) && Q(t.left) && Q(t.right)
                            }))
                        }), O)
                    }, e.prototype.options = function(t) {
                        return this._options(t, ["suppressAuth", "suppressHooks", "showDrafts", "consistentRead", "language"])
                    }, e.prototype.bulkInsertOptions = function(t) {
                        return this._options(t, ["suppressAuth", "suppressHooks", "overrideExisting"])
                    }, e.prototype.bulkUpdateOptions = function(t) {
                        return this._options(t, ["suppressAuth", "suppressHooks", "showDrafts"])
                    }, e.prototype.bulkRemoveOptions = function(t) {
                        return this._options(t, ["suppressAuth", "suppressHooks", "showDrafts"])
                    }, e.prototype.truncateOptions = function(t) {
                        return this._options(t, ["suppressAuth"])
                    }, e.prototype.collectionName = function(t) {
                        return this.addValidation((function() {
                            return (0, i.L7)(t)
                        }), (function() {
                            return s()
                        }))
                    }, e
                }(U);

            function z() {
                return new L
            }

            function Q(t) {
                return (0, i.L7)(t) && "" !== t || (0, i.Y9)(t) && t.hasOwnProperty("_id")
            }

            function G(t) {
                return (0, i.L7)(t) || (0, i.Y9)(t) && t.hasOwnProperty("_id")
            }
            var H = r(18496),
                Y = r.n(H);

            function J(t) {
                return "array" === Y()(t)
            }

            function X(t) {
                return "date" === Y()(t)
            }

            function Z(t) {
                return "string" === Y()(t)
            }

            function K(t) {
                return function(t) {
                    if (!Z(t)) return t;
                    var e = t.slice(0, 1).toUpperCase(),
                        r = t.slice(1, t.length);
                    return e + r
                }(Y()(t))
            }

            function tt(t) {
                if (null == t || "object" != typeof t) return t;
                var e = null;
                if (X(t)) e = new Date(t.getTime());
                else
                    for (var r in e = t.constructor(), t) e[r] = tt(t[r]);
                return e
            }
            var et = function() {
                function t(t, e, r) {
                    this._validations = [], this.operatorName = t, this.ctor = r, this._invalidArguments = tt(e)
                }
                return t.prototype.typeIsString = function(t) {
                    var e = this;
                    return this.addValidation((function() {
                        return Z(t)
                    }), (function() {
                        return "Invalid ".concat(e.operatorName, " parameter value [").concat(K(t), "]. ").concat(e.operatorName, " parameter must be a String.")
                    }))
                }, t.prototype.typeIsStringNumberOrDate = function(t) {
                    var e = this;
                    return this.addValidation((function() {
                        return rt(t)
                    }), (function() {
                        return "Invalid ".concat(e.operatorName, " parameter value [").concat(K(t), "]. Valid ").concat(e.operatorName, " parameter types are String, Number or Date.")
                    }))
                }, t.prototype.sameType = function(t, e) {
                    var r = this;
                    return this.addValidation((function() {
                        return K(t) === K(e)
                    }), (function() {
                        return "Invalid ".concat(r.operatorName, " parameter values [").concat(K(t), "] and [").concat(K(e), "]. Both parameters must be of the same type.")
                    }))
                }, t.prototype.typeIsStringNumberOrDateForAll = function(t) {
                    var e = this;
                    return this.addValidation((function() {
                        return t.every(rt)
                    }), (function() {
                        return "Invalid ".concat(e.operatorName, " usage. ").concat(e.operatorName, " supports only Number, String or Date items.")
                    }))
                }, t.prototype.validFieldName = function(t) {
                    var e = this;
                    return this.addValidation((function() {
                        return Z(t)
                    }), (function() {
                        return "Invalid ".concat(e.operatorName, " field value [").concat(K(t), "]. ").concat(e.operatorName, " field must be a String.")
                    }))
                }, t.prototype.isInstanceOfSameClass = function(t) {
                    var e = this;
                    return this.addValidation((function() {
                        return t instanceof e.ctor
                    }), (function() {
                        return "Invalid ".concat(e.operatorName, " parameter [").concat(K(t), "]. ").concat(e.operatorName, " expects FilterBuilder only.")
                    }))
                }, t.prototype.arityIsOne = function(t) {
                    var e = this;
                    return this.addValidation((function() {
                        return 1 === t.length
                    }), (function() {
                        return "Invalid ".concat(e.operatorName, " usage. ").concat(e.operatorName, " requires one parameter.")
                    }))
                }, t.prototype.arityIsTwo = function(t) {
                    var e = this;
                    return this.addValidation((function() {
                        return 2 === t.length
                    }), (function() {
                        return "Invalid ".concat(e.operatorName, " usage. ").concat(e.operatorName, " requires two parameters.")
                    }))
                }, t.prototype.arityIsThree = function(t) {
                    var e = this;
                    return this.addValidation((function() {
                        return 3 === t.length
                    }), (function() {
                        return "Invalid ".concat(e.operatorName, " usage. ").concat(e.operatorName, " requires three parameters.")
                    }))
                }, t.prototype.arityIsAtLeastTwo = function(t) {
                    var e = this;
                    return this.addValidation((function() {
                        return t.length >= 2
                    }), (function() {
                        return "Invalid ".concat(e.operatorName, " usage. ").concat(e.operatorName, " requires at least two parameters.")
                    }))
                }, t.prototype.addValidation = function(t, e) {
                    return this._validations.push({
                        predicateFn: t,
                        messageFn: e
                    }), this
                }, t.prototype.validateAndAggregate = function() {
                    var t = this,
                        e = this._validations.every((function(e) {
                            var r = e.predicateFn,
                                n = e.messageFn;
                            return t._appendIfInvalid(r(), n())
                        }));
                    return [this._invalidArguments, e]
                }, t.prototype._appendIfInvalid = function(t, e) {
                    return !!t || (this._invalidArguments.push(e), !1)
                }, t
            }();

            function rt(t) {
                return Z(t) || (e = t, "number" === Y()(e)) || X(t);
                var e
            }
            var nt = [function(t) {
                var e = t.$and;
                if (Array.isArray(e) && 1 === e.length) return e[0]
            }, function(t) {
                var e = t.$and;
                if (Array.isArray(e) && 0 === e.length) return {};
                return null
            }, function(t) {
                var e = t.$and;
                if (!e) return;
                var r = [],
                    i = [];
                if (e.forEach((function(t) {
                        ! function(t) {
                            var e = Object.keys(t);
                            return e.every((function(t) {
                                return t.startsWith("$")
                            })) && e.length > 0
                        }(t) ? r = (0, n.Mt)((0, n.Mt)([], r, !0), [t], !1): i = (0, n.Mt)((0, n.Mt)([], i, !0), [t], !1)
                    })), r.length <= 1 || function(t) {
                        var e = t.map((function(t) {
                            return Object.keys(t)
                        })).reduce((function(t, e) {
                            return (0, n.Mt)((0, n.Mt)([], t, !0), e, !0)
                        }), []);
                        return (r = e, i = {}, r.forEach((function(t) {
                            return i[t] = !0
                        })), Object.keys(i)).length !== e.length;
                        var r, i
                    }(r)) return;
                var o = Object.assign.apply(Object, (0, n.Mt)([{}], r, !1));
                return {
                    $and: (0, n.Mt)([o], i, !0)
                }
            }, function(t) {
                var e = t.$and;
                if (!e) return;
                if (!e.find((function(t) {
                        return t.$and
                    }))) return;
                return {
                    $and: e.reduce((function(t, e) {
                        var r = e.$and;
                        return r ? (0, n.Mt)((0, n.Mt)([], t, !0), r, !0) : (0, n.Mt)((0, n.Mt)([], t, !0), [e], !1)
                    }), [])
                }
            }, function(t) {
                var e = t.$or;
                if (!e) return;
                if (!e.find((function(t) {
                        return t.$or
                    }))) return;
                return {
                    $or: e.reduce((function(t, e) {
                        var r = e.$or;
                        return r ? (0, n.Mt)((0, n.Mt)([], t, !0), r, !0) : (0, n.Mt)((0, n.Mt)([], t, !0), [e], !1)
                    }), [])
                }
            }];

            function it(t) {
                return ot(t)[0]
            }

            function ot(t) {
                return Array.isArray(t) ? function(t) {
                    var e = t.map(ot),
                        r = 0 < e.filter((function(t) {
                            return t[1]
                        })).length;
                    return [e.map((function(t) {
                        return t[0]
                    })), r]
                }(t) : "object" != typeof t || null === t || t instanceof Date ? [t, !1] : function(t) {
                    var e = s(t),
                        r = e[0],
                        i = e[1],
                        o = c(r),
                        a = o[0],
                        u = o[1];
                    return [a, i || u];

                    function c(t) {
                        var e = function(t) {
                            for (var e = 0, r = nt; e < r.length; e++) {
                                var n = (0, r[e])(t);
                                if (n) return n
                            }
                        }(t);
                        return e ? [ot(e)[0], !0] : [t, !1]
                    }

                    function s(t) {
                        var e = Object.entries(t).map(l).filter((function(t) {
                            return t[2]
                        }));
                        return [(0, n.C3)((0, n.C3)({}, t), p(e)), !!e.length]
                    }

                    function l(t) {
                        var e = t[0],
                            r = ot(t[1]);
                        return [e, r[0], r[1]]
                    }

                    function p(t) {
                        return t.reduce((function(t, e) {
                            var r, i = e[0],
                                o = e[1];
                            return (0, n.C3)((0, n.C3)({}, t), ((r = {})[i] = o, r))
                        }), {})
                    }
                }(t)
            }

            function at() {
                for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                return {
                    $and: t
                }
            }

            function ut(t) {
                return t && t.$and && 0 === t.$and.length
            }
            var ct = function(t) {
                return void 0 === t && (t = function() {}),
                    function(t) {
                        function e(e) {
                            void 0 === e && (e = {});
                            var r = t.call(this, e) || this;
                            return r.filterTree = e.filterTree || {
                                $and: []
                            }, r.invalidArguments = e.invalidArguments || [], r.encoder = e.encoder || {}, r
                        }
                        return (0, n.ct)(e, t), e.prototype.eq = function() {
                            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                            return this._binaryAnd("$eq", ".eq", t)
                        }, e.prototype.ne = function() {
                            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                            return this._binaryAnd("$ne", ".ne", t)
                        }, e.prototype.ge = function() {
                            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                            return this._AndLogicalEquivalence("$gte", ".ge", t)
                        }, e.prototype.gt = function() {
                            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                            return this._AndLogicalEquivalence("$gt", ".gt", t)
                        }, e.prototype.le = function() {
                            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                            return this._AndLogicalEquivalence("$lte", ".le", t)
                        }, e.prototype.lt = function() {
                            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                            return this._AndLogicalEquivalence("$lt", ".lt", t)
                        }, e.prototype.isNotEmpty = function(t) {
                            var e = this._filterValidator(".isNotEmpty").arityIsOne(arguments).validFieldName(t).validateAndAggregate(),
                                r = e[0];
                            return e[1] ? this.ne(t, null) : this._copy(this.filterTree, r)
                        }, e.prototype.isEmpty = function(t) {
                            var e = this._filterValidator(".isEmpty").arityIsOne(arguments).validFieldName(t).validateAndAggregate(),
                                r = e[0];
                            return e[1] ? this.eq(t, null) : this._copy(this.filterTree, r)
                        }, e.prototype.startsWith = function() {
                            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                            return this._AndStringOperand("$startsWith", ".startsWith", t)
                        }, e.prototype.endsWith = function() {
                            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                            return this._AndStringOperand("$endsWith", ".endsWith", t)
                        }, e.prototype.contains = function() {
                            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                            return this._AndStringOperand("$contains", ".contains", t)
                        }, e.prototype.hasSome = function() {
                            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                            return this._AndSetOperand("$hasSome", ".hasSome", t)
                        }, e.prototype.hasAll = function() {
                            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                            return this._AndSetOperand("$hasAll", ".hasAll", t)
                        }, e.prototype.or = function(t) {
                            var e = this._filterValidator(".or").arityIsOne(arguments).isInstanceOfSameClass(t).validateAndAggregate(),
                                r = e[0];
                            if (e[1]) {
                                var i = ut(this.filterTree) ? [] : [this.filterTree];
                                return this._copy(at({
                                    $or: (0, n.Mt)((0, n.Mt)([], i, !0), [t.filterTree], !1)
                                }), r.concat(t.invalidArguments))
                            }
                            return this._copy(this.filterTree, r)
                        }, e.prototype.and = function(t) {
                            var e = this._filterValidator(".and").arityIsOne(arguments).isInstanceOfSameClass(t).validateAndAggregate(),
                                r = e[0];
                            if (e[1]) {
                                var i = ut(this.filterTree) ? [] : [this.filterTree];
                                return this._copy(at.apply(void 0, (0, n.Mt)((0, n.Mt)([], i, !1), [t.filterTree], !1)), r.concat(t.invalidArguments))
                            }
                            return this._copy(this.filterTree, r)
                        }, e.prototype.not = function(t) {
                            var e = this._filterValidator(".not").arityIsOne(arguments).isInstanceOfSameClass(t).validateAndAggregate(),
                                r = e[0];
                            if (e[1]) {
                                var n = function() {
                                    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                                    return {
                                        $and: t.reduce((function(t, e) {
                                            return J(e.$and) ? t.concat(e.$and) : t.concat([e])
                                        }), [])
                                    }
                                }(tt(this.filterTree), {
                                    $not: [t.filterTree]
                                });
                                return this._copy(n, r.concat(t.invalidArguments))
                            }
                            return this._copy(this.filterTree, r)
                        }, e.prototype.between = function(t, e, r) {
                            var n = this._filterValidator(".between").arityIsThree(arguments).sameType(e, r).typeIsStringNumberOrDate(e).typeIsStringNumberOrDate(r).validateAndAggregate(),
                                i = n[0];
                            return n[1] ? this.ge(t, e).lt(t, r) : this._copy(this.filterTree, i)
                        }, e.prototype.getFilterModel = function() {
                            if (this.invalidArguments.length > 0) throw new Error(this.invalidArguments.join(" "));
                            return it(this.filterTree)
                        }, e.prototype.setFilterModel = function(t) {
                            return this._copy(t, [])
                        }, e.prototype._binaryAnd = function(t, e, r) {
                            var n = Array.prototype.slice.call(r),
                                i = n[0],
                                o = n[1],
                                a = this._filterValidator(e).arityIsTwo(r).validFieldName(i).validateAndAggregate()[0],
                                u = this._makeNewFilter(i, t, o);
                            return this._copy(u, a)
                        }, e.prototype._AndLogicalEquivalence = function(t, e, r) {
                            var n = Array.prototype.slice.call(r),
                                i = n[0],
                                o = n[1],
                                a = this._filterValidator(e).arityIsTwo(r).validFieldName(i).typeIsStringNumberOrDate(o).validateAndAggregate()[0],
                                u = this._makeNewFilter(i, t, o);
                            return this._copy(u, a)
                        }, e.prototype._AndStringOperand = function(t, e, r) {
                            var n = Array.prototype.slice.call(r),
                                i = n[0],
                                o = n[1],
                                a = this._filterValidator(e).arityIsTwo(r).validFieldName(i).typeIsString(o).validateAndAggregate()[0],
                                u = this._makeNewFilter(i, t, o);
                            return this._copy(u, a)
                        }, e.prototype._AndSetOperand = function(t, e, r) {
                            var n = Array.prototype.slice.call(r),
                                i = n[0],
                                o = n.slice(1),
                                a = J(o[0]) ? o[0] : o,
                                u = this._filterValidator(e).arityIsAtLeastTwo(r).validFieldName(i).typeIsStringNumberOrDateForAll(a).validateAndAggregate()[0],
                                c = this._makeNewFilter(i, t, a);
                            return this._copy(c, u)
                        }, e.prototype._makeNewFilter = function(t, e, r) {
                            var n, i = tt(this.filterTree),
                                o = void 0 === r ? null : r,
                                a = this._buildFilter(t, e, o);
                            return J(i.$and) ? (i.$and.push(a), i) : (n = i, 0 === Object.keys(n).length ? at(a) : at(i, a))
                        }, e.prototype._buildFilter = function(t, e, r) {
                            var n;
                            return "$eq" !== e ? ((n = {})[t] = {}, n[t][e] = this._encode(r), n) : ((n = {})[t] = this._encode(r), n)
                        }, e.prototype._encode = function(t) {
                            return e = this.encoder, "function" === Y()(e) ? this.encoder(t) : t;
                            var e
                        }, e.prototype._copy = function(t, e) {
                            return new this.constructor((0, n.C3)((0, n.C3)({}, this), {
                                filterTree: t,
                                invalidArguments: e
                            }))
                        }, e.prototype._filterValidator = function(t) {
                            return new et(t, this.invalidArguments, this.constructor)
                        }, e
                    }(t)
            };
            ! function(t) {
                function e() {
                    return null !== t && t.apply(this, arguments) || this
                }(0, n.ct)(e, t), Object.defineProperty(e.prototype, "constructorName", {
                    get: function() {
                        return "FilterBuilder"
                    },
                    enumerable: !1,
                    configurable: !0
                }), e.prototype._build = function() {
                    return this.getFilterModel()
                }
            }(ct());

            function st(t) {
                for (var e = t.split("-"), r = [], n = 0; n < e.length - 1; n++) i(r, e[n]), r.push({
                    type: "anyOf",
                    value: " \t\n-"
                });
                return i(r, e[e.length - 1]), r;

                function i(t, e) {
                    0 !== e.length && t.push({
                        type: "literal",
                        value: e
                    })
                }
            }
            var lt = function(t) {
                function e(e, r, n, i) {
                    var o = t.call(this, r) || this;
                    return o.operatorName = e, o.ctor = n, o.constructorName = i, o
                }
                return (0, n.ct)(e, t), e.prototype.typeIsString = function(t) {
                    var e = this;
                    return this.addValidation((function() {
                        return (0, i.L7)(t)
                    }), (function() {
                        return w.typeIsString(e.operatorName, t)
                    }))
                }, e.prototype.typeIsStringNumberOrDate = function(t) {
                    var e = this;
                    return this.addValidation((function() {
                        return pt(t)
                    }), (function() {
                        return w.typeIsStringNumberOrDate(e.operatorName, t)
                    }))
                }, e.prototype.sameType = function(t, e) {
                    var r = this;
                    return this.addValidation((function() {
                        return (0, i.sr)(t) === (0, i.sr)(e)
                    }), (function() {
                        return w.sameType(r.operatorName, t, e)
                    }))
                }, e.prototype.typeIsStringNumberOrDateForAll = function(t) {
                    var e = this;
                    return this.addValidation((function() {
                        return t.every(pt)
                    }), (function() {
                        return w.typeIsStringNumberOrDateForAll(e.operatorName)
                    }))
                }, e.prototype.validFieldName = function(t) {
                    var e = this;
                    return this.addValidation((function() {
                        return (0, i.L7)(t)
                    }), (function() {
                        return w.validFieldName(e.operatorName, t)
                    }))
                }, e.prototype.isInstanceOfSameClass = function(t) {
                    var e = this;
                    return this.addValidation((function() {
                        return t instanceof e.ctor
                    }), (function() {
                        return w.isInstanceOfSameClass(e.operatorName, e.constructorName, t)
                    }))
                }, e.prototype.isForCollection = function(t, e) {
                    var r = this;
                    return this.addValidation((function() {
                        return t.collectionName === e
                    }), (function() {
                        return w.isForCollection(r.operatorName, r.constructorName, t.collectionName)
                    }))
                }, e
            }(q);

            function pt(t) {
                return (0, i.L7)(t) || (0, i.Ib)(t) || (0, i.It)(t)
            }
            var dt = function(t) {
                    return void 0 === t && (t = function() {}),
                        function(t) {
                            function e() {
                                return null !== t && t.apply(this, arguments) || this
                            }
                            return (0, n.ct)(e, t), e.prototype.or = function(e) {
                                var r = t.prototype.or.apply(this, arguments);
                                return this._validateCollectionName(r, e, ".or")
                            }, e.prototype.and = function(e) {
                                var r = t.prototype.and.apply(this, arguments);
                                return this._validateCollectionName(r, e, ".and")
                            }, e.prototype.not = function(e) {
                                var r = t.prototype.not.apply(this, arguments);
                                return this._validateCollectionName(r, e, ".not")
                            }, e.prototype._validateCollectionName = function(t, e, r) {
                                if (t.invalidArguments.length > 0) return t;
                                var i = function(t, e) {
                                        if (!t || !t.constructor) return t;
                                        var r = t.collectionName ? t.collectionName : e;
                                        return new t.constructor((0, n.C3)((0, n.C3)({}, t), {
                                            collectionName: r
                                        }))
                                    }(e, this.collectionName),
                                    o = new lt(r, t.invalidArguments, this.constructor, this.constructorName).isForCollection(i, this.collectionName).validateAndAggregate(),
                                    a = o[0];
                                return o[1] ? t : this._copy(this.filterTree, a)
                            }, e.prototype._matchesUrlized = function(t, e) {
                                var r = this._filterValidator("._matchesUrlized").arityIsTwo(arguments).validFieldName(t).typeIsString(e).validateAndAggregate(),
                                    i = r[0];
                                if (r[1]) {
                                    var o = this._makeNewFilter.apply(this, (0, n.Mt)([t], function(t) {
                                        return e(t) ? ["$in", [t, Number.parseInt(t)]] : ["$matches", {
                                            ignoreCase: !0,
                                            spec: st(t)
                                        }];

                                        function e(t) {
                                            return /^-?[0-9]{1,16}$/.test(t)
                                        }
                                    }(e), !1));
                                    return this._copy(o, i)
                                }
                                return this._copy(this.filterTree, i)
                            }, e.prototype.getFilterModel = function() {
                                if (this.invalidArguments.length > 0) throw $(N(this.invalidArguments));
                                return t.prototype.getFilterModel.call(this)
                            }, e.prototype._filterValidator = function(t) {
                                return new lt(t, this.invalidArguments, this.constructor, this.constructorName)
                            }, e
                        }(ct(t))
                },
                ft = function(t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return (0, n.ct)(e, t), Object.defineProperty(e.prototype, "constructorName", {
                        get: function() {
                            return "FilterBuilder"
                        },
                        enumerable: !1,
                        configurable: !0
                    }), e.prototype._build = function() {
                        return this.getFilterModel()
                    }, e
                }(dt());
            ! function(t) {
                function e() {
                    return null !== t && t.apply(this, arguments) || this
                }(0, n.ct)(e, t), e.prototype.in = function() {
                    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                    return this._AndSetOperand("$in", ".in", t)
                }, e.prototype.exists = function() {
                    for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                    return this._binaryAnd("$exists", ".exists", t)
                }, e.prototype.gte = function(t, e) {
                    return this.ge(t, e)
                }, e.prototype.lte = function(t, e) {
                    return this.le(t, e)
                }, e.prototype.build = function() {
                    return this.getFilterModel()
                }
            }(dt());

            function ht() {
                return new ft({})
            }
            var mt = function(t) {
                    function e(e, r) {
                        var n = t.call(this, r) || this;
                        return n.operatorName = e, n
                    }
                    return (0, n.ct)(e, t), e.prototype.allStrings = function(t) {
                        var e = this;
                        return this.addValidation((function() {
                            return t.every(i.L7)
                        }), (function() {
                            return S.typeIsStringOrArrayOfStrings(e.operatorName, t)
                        }))
                    }, e
                }(q),
                vt = function(t) {
                    return void 0 === t && (t = function() {}),
                        function(t) {
                            function e(e) {
                                void 0 === e && (e = {});
                                var r = t.call(this, e) || this;
                                return r.orderBy = e.orderBy || [], r.invalidArguments = e.invalidArguments || [], r
                            }
                            return (0, n.ct)(e, t), e.prototype.ascending = function() {
                                for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                                return this._sortClause("asc", ".ascending", t)
                            }, e.prototype.descending = function() {
                                for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                                return this._sortClause("desc", ".descending", t)
                            }, e.prototype.getSortModel = function() {
                                if (this.invalidArguments.length > 0) throw $(I(this.invalidArguments));
                                return this.orderBy
                            }, e.prototype.setSortModel = function(t) {
                                return this._copySort(t, [])
                            }, e.prototype._sortClause = function(t, e, r) {
                                var n = [];
                                this.orderBy && (n = (0, i.ct)(this.orderBy));
                                var o, a, u = (o = n, a = t, function(t) {
                                        var e = {};
                                        e[t] = a, o.push(e)
                                    }),
                                    c = (0, i.c7)(r[0]) && 1 === r.length ? r[0] : Array.prototype.slice.call(r, 0),
                                    s = this._sortValidator(e).arityIsAtLeastOne(r).allStrings(c).validateAndAggregate(),
                                    l = s[0];
                                return s[1] && c.forEach(u), this._copySort(n, l)
                            }, e.prototype._sortValidator = function(t) {
                                return new mt(t, this.invalidArguments)
                            }, e.prototype._copySort = function(t, e) {
                                return new this.constructor((0, n.C3)((0, n.C3)({}, this), {
                                    orderBy: t,
                                    invalidArguments: e
                                }))
                            }, e
                        }(t)
                };

            function gt(t) {
                return "string" == typeof t && t.length > 0
            }
            var yt = function(t) {
                t && (this.count = t.count, this.total = t.total, this.cursors = t.cursors, this.hasNext = t.hasNext, this.hasPrev = t.hasPrev)
            };

            function bt(t, e, r) {
                var n = t.skipNumber || 0,
                    i = void 0 === t.limitNumber ? e : t.limitNumber;
                return r && (i = Math.min(i, e)), r ? n + i : n - i
            }
            var Nt = 9007199254740991,
                _t = function(t) {
                    function e(e) {
                        var r = t.call(this, e) || this;
                        return r.provider = e.provider, r.collectionName = e.collectionName, r.limitNumber = e.limitNumber, r.invalidArguments = e.invalidArguments, r.orderBy = e.orderBy, r.skipNumber = e.skipNumber, r.included = e.included, r.projectedFields = e.projectedFields, r.cursor = e.cursor, r
                    }
                    return (0, n.ct)(e, t), Object.defineProperty(e.prototype, "constructorName", {
                        get: function() {
                            return "WixDataQuery"
                        },
                        enumerable: !1,
                        configurable: !0
                    }), e.prototype.count = function(t) {
                        var e = this;
                        return It(this.invalidArguments, this.collectionName).then((function() {
                            return z().options(t).validateAndReject()
                        })).then((function() {
                            return e.provider.count(e.collectionName, e.getOptimizedFilter(), t)
                        })).then((function(t) {
                            return t.totalCount
                        }))
                    }, e.prototype.distinct = function(t, e) {
                        var r = this,
                            i = this,
                            o = (e || {}).omitTotalCount,
                            a = this.cursor ? void 0 : this.skipNumber,
                            u = this.cursor ? "" : t;
                        return It(this.invalidArguments, this.collectionName).then((function() {
                            return z().options(e).validateAndReject()
                        })).then((function() {
                            return z().fieldName(u).validateAndReject()
                        })).then((function() {
                            return r.provider.distinct(r.collectionName, r.getOptimizedFilter(), r.orderBy, u, a, r.limitNumber, e, r.cursor, void 0, o)
                        })).then((function(t) {
                            var o = t.pagingMetadata || new yt,
                                a = o.cursors,
                                c = o.hasNext,
                                s = void 0 !== c && c,
                                l = gt(null == a ? void 0 : a.next) || gt(null == a ? void 0 : a.prev) ? (0, n.C3)((0, n.C3)({}, e), {
                                    omitTotalCount: !0
                                }) : e;
                            return new jt({
                                createdByCursor: r.cursor,
                                items: t.items,
                                length: t.items.length,
                                query: i,
                                totalCount: t.totalCount,
                                cursors: a,
                                partialIncludes: !1,
                                pagingFunction: function() {
                                    return this.distinct(u, l)
                                },
                                hasNext: s
                            })
                        }))
                    }, e.prototype._transformOrderingForAggregates = function(t, e) {
                        return void 0 === t && (t = []), t.length > 0 ? t.filter((function(t) {
                            return t.hasOwnProperty(e)
                        })).map((function(t) {
                            return {
                                _id: t[e]
                            }
                        })) : null
                    }, e.prototype._distinctValuesPipeline = function(t) {
                        return [this.filterTree && Object.keys(this.filterTree).length > 0 ? {
                            $match: this.filterTree
                        } : null, {
                            $distinct: "$".concat(t)
                        }].filter(this._stageFilter)
                    }, e.prototype._stageFilter = function(t) {
                        return null !== t
                    }, e.prototype.fields = function() {
                        for (var t = [], r = 0; r < arguments.length; r++) t[r] = arguments[r];
                        for (var n = (0, i.ct)(this.projectedFields), o = 0; o < t.length; o++) n.push(t[o]);
                        return new e({
                            provider: this.provider,
                            collectionName: this.collectionName,
                            filterTree: this.filterTree,
                            orderBy: this.orderBy,
                            skipNumber: this.skipNumber,
                            limitNumber: this.limitNumber,
                            invalidArguments: this.invalidArguments,
                            included: this.included,
                            cursor: this.cursor,
                            projectedFields: n
                        })
                    }, e.prototype.find = function(t) {
                        var e = this,
                            r = this,
                            i = (t || {}).omitTotalCount;
                        return It(this.invalidArguments, this.collectionName).then((function() {
                            return z().options(t).validateAndReject()
                        })).then((function() {
                            var r = e.cursor ? void 0 : e.skipNumber;
                            return e.provider.find(e.collectionName, e.getOptimizedFilter(), e.orderBy, r, e.limitNumber, t, e.included, i, e.cursor, e.projectedFields)
                        })).then((function(i) {
                            var o = i.pagingMetadata.cursors,
                                a = gt(null == o ? void 0 : o.next) || gt(null == o ? void 0 : o.prev) ? (0, n.C3)((0, n.C3)({}, t), {
                                    omitTotalCount: !0
                                }) : t;
                            return new jt({
                                createdByCursor: e.cursor,
                                totalCount: i.totalCount,
                                query: r,
                                items: i.items,
                                cursors: o,
                                partialIncludes: i.partialIncludes,
                                hasNext: i.pagingMetadata.hasNext,
                                pagingFunction: function() {
                                    return this.find(a)
                                }
                            })
                        }))
                    }, e.prototype.limit = function(t) {
                        var r = this._queryValidator(".limit").arityIsOne(arguments).isPositiveNumber(t).isInteger(t).validateAndAggregate()[0];
                        return new e({
                            provider: this.provider,
                            collectionName: this.collectionName,
                            filterTree: this.filterTree,
                            orderBy: this.orderBy,
                            skipNumber: this.skipNumber,
                            limitNumber: t,
                            included: this.included,
                            cursor: this.cursor,
                            invalidArguments: r,
                            projectedFields: this.projectedFields
                        })
                    }, e.prototype.skip = function(t) {
                        var r = this._queryValidator(".skip").arityIsOne(arguments).isNonNegativeNumber(t).isInteger(t).validateAndAggregate()[0];
                        return new e({
                            provider: this.provider,
                            collectionName: this.collectionName,
                            filterTree: this.filterTree,
                            orderBy: this.orderBy,
                            skipNumber: t,
                            limitNumber: this.limitNumber,
                            included: this.included,
                            cursor: this.cursor,
                            invalidArguments: r,
                            projectedFields: this.projectedFields
                        })
                    }, e.prototype.include = function() {
                        for (var t = [], r = 0; r < arguments.length; r++) t[r] = arguments[r];
                        for (var n = (0, i.ct)(this.included), o = 0; o < t.length; o++) n.push(t[o]);
                        return new e({
                            provider: this.provider,
                            collectionName: this.collectionName,
                            filterTree: this.filterTree,
                            orderBy: this.orderBy,
                            skipNumber: this.skipNumber,
                            limitNumber: this.limitNumber,
                            invalidArguments: this.invalidArguments,
                            included: n,
                            cursor: this.cursor,
                            projectedFields: this.projectedFields
                        })
                    }, e.prototype.setFilterModel = function(e) {
                        var r = t.prototype.setFilterModel.call(this, e);
                        return this._setQuerySpecificInvalidArguments(r)
                    }, e.prototype.getOptimizedFilter = function() {
                        try {
                            return it(this.filterTree)
                        } catch (t) {
                            return this.filterTree
                        }
                    }, e.prototype.setSortModel = function(e) {
                        var r = t.prototype.setSortModel.call(this, e);
                        return this._setQuerySpecificInvalidArguments(r)
                    }, e.prototype._setQuerySpecificInvalidArguments = function(t) {
                        var e = function(t, e) {
                                return void 0 !== t ? e.validateAndAggregate()[0] : []
                            },
                            r = this._queryValidator(".limit", []).isPositiveNumber(this.limitNumber).isInteger(this.limitNumber),
                            i = this._queryValidator(".skip", []).isNonNegativeNumber(this.skipNumber).isInteger(this.skipNumber),
                            o = (0, n.Mt)((0, n.Mt)([], e(this.limitNumber, r), !0), e(this.skipNumber, i), !0);
                        return Object.assign(t, {
                            invalidArguments: o
                        })
                    }, e.prototype._queryValidator = function(t, e) {
                        return void 0 === e && (e = this.invalidArguments), new Ot(t, e)
                    }, e
                }(dt(vt()));

            function It(t, e) {
                var r = ((0, i.L7)(e) ? [] : [s()]).concat(t);
                return r.length > 0 ? Promise.reject($(E.queryInvalid(e, r))) : Promise.resolve()
            }

            function At(t, e) {
                return new _t({
                    provider: t,
                    collectionName: e,
                    filterTree: {},
                    orderBy: void 0,
                    skipNumber: 0,
                    invalidArguments: [],
                    included: [],
                    projectedFields: []
                })
            }
            var jt = function() {
                    function t(t) {
                        var e = this;
                        this._executeQuery = function(t) {
                            return e._pagingFunction.bind(t)()
                        }, this._withCalculatedSkip = function(t, r) {
                            return t.skipNumber = bt(e.query, e.length, r), Promise.resolve(t)
                        }, t && (this._items = t.items, this._totalCount = t.totalCount, this._cursors = t.cursors, this._createdByCursor = t.createdByCursor, this._query = t.query, this._partialIncludes = t.partialIncludes, this._pagingFunction = t.pagingFunction, this._hasNext = t.hasNext, this.nextSkipNumber = bt(this.query, this.length, !0), this.prevSkipNumber = bt(this.query, this.length, !1))
                    }
                    return Object.defineProperty(t.prototype, "items", {
                        get: function() {
                            return this._items
                        },
                        enumerable: !1,
                        configurable: !0
                    }), Object.defineProperty(t.prototype, "length", {
                        get: function() {
                            return this.items.length
                        },
                        enumerable: !1,
                        configurable: !0
                    }), Object.defineProperty(t.prototype, "totalCount", {
                        get: function() {
                            return this._totalCount
                        },
                        enumerable: !1,
                        configurable: !0
                    }), Object.defineProperty(t.prototype, "query", {
                        get: function() {
                            return this._query
                        },
                        enumerable: !1,
                        configurable: !0
                    }), Object.defineProperty(t.prototype, "pageSize", {
                        get: function() {
                            return this._query.limitNumber
                        },
                        enumerable: !1,
                        configurable: !0
                    }), Object.defineProperty(t.prototype, "totalPages", {
                        get: function() {
                            if (this.totalCount && this.pageSize) return Math.ceil(this.totalCount / this.pageSize);
                            if (0 === this.totalCount) return 0;
                            var t = this.query.skipNumber || 0;
                            return this.totalCount && this.length + t <= this.totalCount ? Math.ceil(this.totalCount / this.length) : void 0
                        },
                        enumerable: !1,
                        configurable: !0
                    }), Object.defineProperty(t.prototype, "currentPage", {
                        get: function() {
                            if (0 !== this.length) {
                                var t = this.query.skipNumber || 0;
                                return this.totalCount <= 0 || t >= this.totalCount || void 0 === this.pageSize ? this.hasNext() ? Math.floor(t / this.length) : void 0 : Math.floor(t / this.pageSize)
                            }
                        },
                        enumerable: !1,
                        configurable: !0
                    }), Object.defineProperty(t.prototype, "partialIncludes", {
                        get: function() {
                            return this._partialIncludes
                        },
                        enumerable: !1,
                        configurable: !0
                    }), t.prototype.next = function() {
                        var t = this;
                        return this.hasNext() ? gt(this.nextCursor) ? this._getNewCursorQuery(this.nextCursor, !0).then((function(e) {
                            return t._executeQuery(e)
                        })).then((function(e) {
                            return e._withTotalCount(t._totalCount)
                        })) : this._getNewQuery(!0).then((function(e) {
                            return t._executeQuery(e)
                        })) : this._rejectNoNextPage()
                    }, t.prototype.prev = function() {
                        var t = this;
                        return this.hasPrev() ? gt(this.prevCursor) ? this._getNewCursorQuery(this.prevCursor, !1).then((function(e) {
                            return t._executeQuery(e)
                        })).then((function(e) {
                            return e._withTotalCount(t._totalCount)
                        })) : this._getNewQuery(!1).then((function(e) {
                            return t._executeQuery(e)
                        })) : this._rejectNoPrevPage()
                    }, Object.defineProperty(t.prototype, "nextCursor", {
                        get: function() {
                            return this._cursors && this._cursors.next
                        },
                        enumerable: !1,
                        configurable: !0
                    }), Object.defineProperty(t.prototype, "prevCursor", {
                        get: function() {
                            return this._cursors && this._cursors.prev
                        },
                        enumerable: !1,
                        configurable: !0
                    }), t.prototype.hasNext = function() {
                        return this._hasNext
                    }, t.prototype.hasPrev = function() {
                        return gt(this._createdByCursor) || this._cursors ? gt(this.prevCursor) : !(0 === (this.query.skipNumber || 0) || this.totalCount <= 0) && bt(this.query, this.length, !1) >= 0
                    }, t.prototype.toJSON = function() {
                        return {
                            currentPage: this.currentPage,
                            items: this.items,
                            length: this.length,
                            pageSize: this.pageSize,
                            partialIncludes: this.partialIncludes,
                            query: this.query,
                            totalCount: this.totalCount,
                            totalPages: this.totalPages
                        }
                    }, t.prototype._getNewQuery = function(t) {
                        return this._withCalculatedSkip(new _t({
                            provider: this.query.provider,
                            collectionName: this.query.collectionName,
                            filterTree: this.query.filterTree,
                            orderBy: this.query.orderBy,
                            limitNumber: this.query.limitNumber,
                            included: this.query.included,
                            invalidArguments: [],
                            projectedFields: this.query.projectedFields
                        }), t)
                    }, t.prototype._getNewCursorQuery = function(t, e) {
                        var r = new _t({
                            provider: this.query.provider,
                            collectionName: this.query.collectionName,
                            filterTree: {},
                            limitNumber: this.query.limitNumber,
                            invalidArguments: [],
                            cursor: t,
                            included: [],
                            projectedFields: []
                        });
                        return this._withCalculatedSkip(r, e)
                    }, t.prototype._withTotalCount = function(t) {
                        return this._totalCount = t, this
                    }, t.prototype._rejectNoPrevPage = function() {
                        return Promise.reject($(E.noPrevPage(this.query.collectionName)))
                    }, t.prototype._rejectNoNextPage = function() {
                        return Promise.reject($(E.noNextPage(this.query.collectionName)))
                    }, t
                }(),
                Ot = function(t) {
                    function e(e, r) {
                        var n = t.call(this, r) || this;
                        return n.operatorName = e, n
                    }
                    return (0, n.ct)(e, t), e.prototype._isNumber = function(t, e) {
                        var r = this;
                        return this.addValidation((function() {
                            return (0, i.Ib)(e)
                        }), (function() {
                            return E.isNumber(r.operatorName, t, e)
                        }))
                    }, e.prototype.isPositiveNumber = function(t) {
                        var e = this;
                        return this._isNumber("positive", t).addValidation((function() {
                            return !Number.isNaN(t) && t > 0
                        }), (function() {
                            return E.isPositiveNumber(e.operatorName, t)
                        }))
                    }, e.prototype.isNonNegativeNumber = function(t) {
                        var e = this;
                        return this._isNumber("non-negative", t).addValidation((function() {
                            return !Number.isNaN(t) && t >= 0
                        }), (function() {
                            return E.isNonNegativeNumber(e.operatorName, t)
                        }))
                    }, e.prototype.isInteger = function(t) {
                        var e = this;
                        return this.addValidation((function() {
                            return !Number.isNaN(t) && Number.isFinite(t) && Number.isInteger(t) && t < Nt && t > -9007199254740991
                        }), (function() {
                            return E.isInteger(e.operatorName, t)
                        }))
                    }, e.prototype.notGreaterThan = function(t, e) {
                        var r = this;
                        return this.addValidation((function() {
                            return t <= e
                        }), (function() {
                            return E.notGreaterThan(r.operatorName, t, e)
                        }))
                    }, e
                }(q);
            var Et = function(t) {
                    return void 0 === t && (t = function() {}),
                        function(t) {
                            function e(e) {
                                void 0 === e && (e = {});
                                var r = t.call(this, e) || this;
                                return r.groupByTree = e.groupByTree, r.invalidArguments = e.invalidArguments || [], r
                            }
                            return (0, n.ct)(e, t), e.prototype.sum = function(t, e) {
                                var r = this._groupValidator(".sum").arityIsAtLeastOne(arguments).typeIsString(t).validateAndAggregate()[0];
                                return this._addAccumulator("sum", t, e, r)
                            }, e.prototype.avg = function(t, e) {
                                var r = this._groupValidator(".avg").arityIsAtLeastOne(arguments).typeIsString(t).validateAndAggregate()[0];
                                return this._addAccumulator("avg", t, e, r)
                            }, e.prototype.min = function(t, e) {
                                var r = this._groupValidator(".min").arityIsAtLeastOne(arguments).typeIsString(t).validateAndAggregate()[0];
                                return this._addAccumulator("min", t, e, r)
                            }, e.prototype.max = function(t, e) {
                                var r = this._groupValidator(".max").arityIsAtLeastOne(arguments).typeIsString(t).validateAndAggregate()[0];
                                return this._addAccumulator("max", t, e, r)
                            }, e.prototype.count = function() {
                                var t = this._groupValidator(".count").arityIsZero(arguments).validateAndAggregate()[0],
                                    e = (0, i.ct)(this.groupByTree) || {
                                        _id: St()
                                    };
                                return e.count = {
                                    $sum: 1
                                }, this._copy(e, t)
                            }, e.prototype._addAccumulator = function(t, e, r, n) {
                                var o, a = (0, i.ct)(this.groupByTree) || {
                                        _id: St()
                                    },
                                    u = r || e + ((o = t).charAt(0).toUpperCase() + o.slice(1)),
                                    c = {};
                                return c["$".concat(t)] = "$".concat(e), a[u] = c, this._copy(a, n)
                            }, e.prototype._copy = function(t, e) {
                                return new this.constructor((0, n.C3)((0, n.C3)({}, this), {
                                    groupByTree: t,
                                    invalidArguments: e
                                }))
                            }, e.prototype._groupValidator = function(t) {
                                return new wt(t, this.invalidArguments)
                            }, e
                        }(t)
                },
                Ct = function(t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return (0, n.ct)(e, t), e.prototype._build = function() {
                        return function(t) {
                            if (t.length > 0) throw $(_(t))
                        }(this.invalidArguments), this.groupByTree
                    }, e
                }(Et());
            var wt = function(t) {
                function e(e, r) {
                    var n = t.call(this, r) || this;
                    return n.operatorName = e, n
                }
                return (0, n.ct)(e, t), e.prototype.typeIsString = function(t) {
                    var e = this;
                    return this.addValidation((function() {
                        return (0, i.L7)(t)
                    }), (function() {
                        return w.typeIsString(e.operatorName, t)
                    }))
                }, e
            }(q);

            function Pt() {
                for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                var r = St.apply(void 0, t);
                return new Ct({
                    groupByTree: {
                        _id: r
                    }
                })
            }

            function St() {
                for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                if (1 === t.length) return "$".concat(t);
                if (t.length > 1) {
                    var r = {};
                    return t.forEach((function(t) {
                        return r[t] = "$".concat(t)
                    })), r
                }
                return "0"
            }
            var Tt = function(t) {
                function e(e) {
                    void 0 === e && (e = {});
                    var r = t.call(this, e) || this;
                    return r.provider = e.provider, r.collectionName = e.collectionName, r.filterTree = e.filterTree, r.havingTree = e.havingTree, r.skipNumber = e.skipNumber || 0, r.limitNumber = e.limitNumber, r.cursor = e.cursor, r.invalidArguments = e.invalidArguments || [], r
                }
                return (0, n.ct)(e, t), e.prototype.filter = function(t) {
                    var r = this._aggregateValidator(".filter").arityIsOne(arguments).filterIsNotSet(this).filterBuilder(t).validateAndAggregate()[0];
                    return new e({
                        provider: this.provider,
                        collectionName: this.collectionName,
                        filterTree: t.filterTree,
                        groupByTree: this.groupByTree,
                        havingTree: this.havingTree,
                        skipNumber: this.skipNumber,
                        limitNumber: this.limitNumber,
                        cursor: this.cursor,
                        orderBy: this.orderBy,
                        invalidArguments: r.concat(t.invalidArguments)
                    })
                }, e.prototype.group = function() {
                    for (var t = [], r = 0; r < arguments.length; r++) t[r] = arguments[r];
                    var o = (0, i.ct)(this.groupByTree),
                        a = this._aggregateValidator(".group").arityIsAtLeastOne(arguments).groupIsNotSet(o).validateAndAggregate()[0];
                    return o ? "0" === o._id && (o = (0, n.C3)((0, n.C3)({}, o), {
                        _id: St.apply(void 0, t)
                    })) : o = {
                        _id: St.apply(void 0, t)
                    }, new e({
                        provider: this.provider,
                        collectionName: this.collectionName,
                        filterTree: this.filterTree,
                        groupByTree: o,
                        havingTree: this.havingTree,
                        skipNumber: this.skipNumber,
                        limitNumber: this.limitNumber,
                        cursor: this.cursor,
                        orderBy: this.orderBy,
                        invalidArguments: a
                    })
                }, e.prototype.having = function(t) {
                    var r = this._aggregateValidator(".having").arityIsOne(arguments).havingIsNotSet(this).filterBuilder(t).validateAndAggregate()[0];
                    return new e({
                        provider: this.provider,
                        collectionName: this.collectionName,
                        filterTree: this.filterTree,
                        groupByTree: this.groupByTree,
                        havingTree: t.filterTree,
                        skipNumber: this.skipNumber,
                        limitNumber: this.limitNumber,
                        cursor: this.cursor,
                        orderBy: this.orderBy,
                        invalidArguments: r.concat(t.invalidArguments)
                    })
                }, e.prototype.skip = function(t) {
                    var r = this._aggregateValidator(".skip").arityIsOne(arguments).isNonNegativeNumber(t).isInteger(t).validateAndAggregate()[0];
                    return new e({
                        provider: this.provider,
                        collectionName: this.collectionName,
                        filterTree: this.filterTree,
                        groupByTree: this.groupByTree,
                        havingTree: this.havingTree,
                        skipNumber: t,
                        limitNumber: this.limitNumber,
                        cursor: this.cursor,
                        orderBy: this.orderBy,
                        invalidArguments: r
                    })
                }, e.prototype.limit = function(t) {
                    var r = this._aggregateValidator(".limit").arityIsOne(arguments).isPositiveNumber(t).isInteger(t).validateAndAggregate()[0];
                    return new e({
                        provider: this.provider,
                        collectionName: this.collectionName,
                        filterTree: this.filterTree,
                        groupByTree: this.groupByTree,
                        havingTree: this.havingTree,
                        skipNumber: this.skipNumber,
                        limitNumber: t,
                        cursor: this.cursor,
                        orderBy: this.orderBy,
                        invalidArguments: r
                    })
                }, e.prototype.run = function(t) {
                    var e, r, n = this,
                        i = this,
                        o = this._buildPipeline();
                    return (e = this.invalidArguments, r = this.collectionName, e.length > 0 ? Promise.reject($(b.aggregateInvalid(r, e))) : Promise.resolve()).then((function() {
                        return z().options(t).validateAndReject()
                    })).then((function() {
                        return n.provider.runAggregate(n.collectionName, o, n.limitNumber, t, n.cursor)
                    })).then((function(t) {
                        var e = t.items,
                            r = t.hasNext,
                            o = t.cursors;
                        return new Wt({
                            items: e,
                            hasNext: r,
                            aggregate: i,
                            pageSize: e.length,
                            cursors: o,
                            createdByCursor: n.cursor
                        })
                    }))
                }, e.prototype._buildPipeline = function() {
                    return [this.filterTree ? {
                        $match: this.filterTree
                    } : null, this.groupByTree ? {
                        $group: this.groupByTree
                    } : null, this.groupByTree ? {
                        $project: Dt(this.groupByTree)
                    } : null, this.havingTree ? {
                        $match: this.havingTree
                    } : null, this.orderBy.length > 0 ? {
                        $sort: this.orderBy
                    } : null, {
                        $skip: this.skipNumber
                    }].filter((function(t) {
                        return null !== t
                    }))
                }, e.prototype._aggregateValidator = function(t) {
                    return new Rt(t, this.invalidArguments)
                }, e
            }(vt(Et()));

            function Dt(t) {
                var e, r = Object.keys(t).map((function(t) {
                    var e;
                    return (e = {})[t] = 1, e
                }));
                return (0, i.Y9)(t._id) ? r.push(function(t) {
                    var e = Object.keys(t),
                        r = e.map((function(t) {
                            var e;
                            return (e = {})[t] = "$_id.".concat(t), e
                        }));
                    return Object.assign.apply(Object, (0, n.Mt)([{}], r, !1))
                }(t._id)) : (0, i.L7)(t._id) && "0" !== t._id && r.push(((e = {})[t._id.substr(1)] = "$_id", e)), Object.assign.apply(Object, (0, n.Mt)([{}], r, !1))
            }

            function kt(t, e, r, n) {
                return new Tt({
                    provider: t,
                    collectionName: e,
                    cursor: n,
                    limitNumber: r
                })
            }
            var Wt = function() {
                    function t(t) {
                        t && (this._items = t.items, this._hasNext = t.hasNext, this._aggregate = t.aggregate, this._pageSize = t.pageSize, this._cursors = t.cursors, this._createdByCursor = t.createdByCursor)
                    }
                    return Object.defineProperty(t.prototype, "items", {
                        get: function() {
                            return this._items
                        },
                        enumerable: !1,
                        configurable: !0
                    }), t.prototype.hasNext = function() {
                        return this._hasNext
                    }, t.prototype.hasPrev = function() {
                        return gt(this._createdByCursor) || this._cursors ? gt(this.prevCursor) : this._aggregate.skipNumber > 0
                    }, Object.defineProperty(t.prototype, "length", {
                        get: function() {
                            return this._items.length
                        },
                        enumerable: !1,
                        configurable: !0
                    }), t.prototype.next = function() {
                        if (!this.hasNext()) return this._rejectNoNextPage();
                        var t;
                        if (gt(this.nextCursor)) t = this._getNewCursorAggregate(this.nextCursor);
                        else {
                            var e = bt(this._aggregate, this.length, !0);
                            t = this._aggregate.skip(e)
                        }
                        return t.run()
                    }, t.prototype.prev = function() {
                        return this.hasPrev() ? (gt(this.prevCursor) ? this._getNewCursorAggregate(this.prevCursor) : this._aggregate.skip(Math.max(0, this._aggregate.skipNumber - this._aggregate.limitNumber))).run() : this._rejectNoPrevPage()
                    }, Object.defineProperty(t.prototype, "nextCursor", {
                        get: function() {
                            return this._cursors && this._cursors.next
                        },
                        enumerable: !1,
                        configurable: !0
                    }), Object.defineProperty(t.prototype, "prevCursor", {
                        get: function() {
                            return this._cursors && this._cursors.prev
                        },
                        enumerable: !1,
                        configurable: !0
                    }), t.prototype._getNewCursorAggregate = function(t) {
                        var e = this._aggregate;
                        return kt(e.provider, e.collectionName, e.limitNumber, t)
                    }, t.prototype._rejectNoPrevPage = function() {
                        return Promise.reject($(E.noPrevPage(this._aggregate.collectionName)))
                    }, t.prototype._rejectNoNextPage = function() {
                        return Promise.reject($(E.noNextPage(this._aggregate.collectionName)))
                    }, t
                }(),
                xt = 9007199254740991,
                Rt = function(t) {
                    function e(e, r) {
                        var n = t.call(this, r) || this;
                        return n.operatorName = e, n
                    }
                    return (0, n.ct)(e, t), e.prototype.filterBuilder = function(t) {
                        var e = this;
                        return this.addValidation((function() {
                            return "FilterBuilder" === t.constructorName
                        }), (function() {
                            return b.filterMustBeBuilder(e.operatorName)
                        }))
                    }, e.prototype.filterIsNotSet = function(t) {
                        var e = this;
                        return this.addValidation((function() {
                            return void 0 === t.filterTree
                        }), (function() {
                            return b.filterIsAlreadySet(e.operatorName)
                        }))
                    }, e.prototype.havingIsNotSet = function(t) {
                        var e = this;
                        return this.addValidation((function() {
                            return void 0 === t.havingTree
                        }), (function() {
                            return b.filterIsAlreadySet(e.operatorName)
                        }))
                    }, e.prototype.groupIsNotSet = function(t) {
                        var e = this;
                        return this.addValidation((function() {
                            return function(t) {
                                return !t || "0" === t._id
                            }(t)
                        }), (function() {
                            return b.groupIsAlreadySet(e.operatorName)
                        }))
                    }, e.prototype._isNumber = function(t, e) {
                        var r = this;
                        return this.addValidation((function() {
                            return (0, i.Ib)(e)
                        }), (function() {
                            return E.isNumber(r.operatorName, t, e)
                        }))
                    }, e.prototype.isPositiveNumber = function(t) {
                        var e = this;
                        return this._isNumber("positive", t).addValidation((function() {
                            return !Number.isNaN(t) && t > 0
                        }), (function() {
                            return E.isPositiveNumber(e.operatorName, t)
                        }))
                    }, e.prototype.isNonNegativeNumber = function(t) {
                        var e = this;
                        return this._isNumber("non-negative", t).addValidation((function() {
                            return !Number.isNaN(t) && t >= 0
                        }), (function() {
                            return E.isNonNegativeNumber(e.operatorName, t)
                        }))
                    }, e.prototype.isInteger = function(t) {
                        var e = this;
                        return this.addValidation((function() {
                            return !Number.isNaN(t) && Number.isFinite(t) && Number.isInteger(t) && t < xt && t > -9007199254740991
                        }), (function() {
                            return E.isInteger(e.operatorName, t)
                        }))
                    }, e
                }(q);
            var $t = function(t) {
                function e() {
                    return null !== t && t.apply(this, arguments) || this
                }
                return (0, n.ct)(e, t), e.prototype._build = function() {
                    return this.getSortModel()
                }, e
            }(vt());
            var Ft = function() {
                function t(t) {
                    if (t) {
                        this._provider = t.provider, this._collectionName = t.collectionName, this._referenceAttribute = t.referenceAttribute, this._holdingItemId = t.holdingItemId, this._items = t.items, this._totalCount = t.totalCount, this._options = t.options;
                        var e = t.options || {},
                            r = e.skip,
                            n = void 0 === r ? 0 : r,
                            i = e.limit;
                        this._skip = n, this._limit = i, this._cursors = t.cursors, this._createdByCursor = t.createdByCursor, this._hasNext = t.hasNext
                    }
                }
                return Object.defineProperty(t.prototype, "items", {
                    get: function() {
                        return this._items
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "totalCount", {
                    get: function() {
                        return this._totalCount
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "nextCursor", {
                    get: function() {
                        return this._cursors && this._cursors.next
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "prevCursor", {
                    get: function() {
                        return this._cursors && this._cursors.prev
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.hasNext = function() {
                    return this._hasNext
                }, t.prototype.hasPrev = function() {
                    return gt(this._createdByCursor) || this._cursors ? gt(this.prevCursor) : this._skip > 0
                }, t.prototype.next = function() {
                    var t = this;
                    return this.hasNext() ? gt(this.nextCursor) ? this._getNewCursorQuery(this.nextCursor)._fetch().then((function(e) {
                        return e._withTotalCount(t._totalCount)
                    })) : this._withChangedSkip(!0)._fetch() : this._rejectNoNextPage()
                }, t.prototype.prev = function() {
                    var t = this;
                    return this.hasPrev() ? gt(this.prevCursor) ? this._getNewCursorQuery(this.prevCursor)._fetch().then((function(e) {
                        return e._withTotalCount(t._totalCount)
                    })) : this._withChangedSkip(!1)._fetch() : this._rejectNoPrevPage()
                }, t.prototype._rejectNoPrevPage = function() {
                    return Promise.reject($(E.noPrevPage(this._collectionName)))
                }, t.prototype._rejectNoNextPage = function() {
                    return Promise.reject($(E.noNextPage(this._collectionName)))
                }, t.prototype._withChangedSkip = function(t) {
                    var e = bt({
                        skipNumber: this._skip,
                        limitNumber: this._limit
                    }, this._items.length, t);
                    return Mt({
                        items: this._items,
                        totalCount: this._totalCount,
                        pagingMetadata: new yt({
                            total: this._totalCount
                        })
                    }, this._provider, this._collectionName, this._holdingItemId, this._referenceAttribute, (0, n.C3)((0, n.C3)({}, this._options), {
                        skip: e,
                        limit: this._limit
                    }))
                }, t.prototype._getNewCursorQuery = function(t) {
                    return Mt({}, this._provider, this._collectionName, "", this._referenceAttribute, {
                        cursor: t,
                        limit: this._limit,
                        omitTotalCount: !0
                    })
                }, t.prototype._fetch = function() {
                    var t = this;
                    return this._provider.queryReferenced(this._collectionName, this._holdingItemId, this._referenceAttribute, this._options).then((function(e) {
                        return Mt(e, t._provider, t._collectionName, t._holdingItemId, t._referenceAttribute, t._options)
                    }))
                }, t.prototype._withTotalCount = function(t) {
                    return this._totalCount = t, this
                }, t
            }();

            function Mt(t, e, r, n, i, o) {
                var a = t.items,
                    u = t.totalCount,
                    c = t.pagingMetadata || new yt,
                    s = c.total,
                    l = c.cursors,
                    p = c.hasNext,
                    d = void 0 !== p && p;
                return new Ft({
                    provider: e,
                    collectionName: r,
                    referenceAttribute: i,
                    holdingItemId: n,
                    items: a,
                    totalCount: s || u,
                    options: o,
                    cursors: l,
                    createdByCursor: null == o ? void 0 : o.cursor,
                    hasNext: d
                })
            }

            function Vt(t, e) {
                return !!t && (Array.isArray(t) ? t.some((function(t) {
                    return Vt(t, e)
                })) : "object" == typeof t && Object.keys(t).some((function(r) {
                    return e(r) || Vt(t[r], e)
                })))
            }
            var Bt = function() {
                    function t(t) {
                        var e = this;
                        this.get = Ut((function(t, r, n, i) {
                            return z().arity("get", t, 2, 3).collectionName(r).itemId(n).options(i).validateAndReject().then((function() {
                                return e.provider.get(r, n, i)
                            })).then(zt)
                        })), this.insert = Ut((function(t, r, n, i) {
                            return z().arity("insert", t, 2, 3).validateAndReject().then((function() {
                                return Lt(e.provider, "insert")(r, n, i)
                            }))
                        })), this.query = function(t) {
                            return At(e.provider, t)
                        }, this.filter = function() {
                            return ht()
                        }, this.sort = function() {
                            return new $t(void 0)
                        }, this.find = function(t, r, i, o, a, u, c, s) {
                            var l = At(e.provider, t);
                            l.filterTree = r, l.orderBy = i, l.skipNumber = o, l.limitNumber = a, l.included = c;
                            var p = (0, n.C3)((0, n.C3)({}, u), {
                                omitTotalCount: s
                            });
                            return l.find(p)
                        }, this.remove = Ut((function(t, r, n, i) {
                            return z().arity("remove", t, 2, 3).collectionName(r).itemId(n).options(i).validateAndReject().then((function() {
                                return e.provider.remove(r, n, i)
                            })).then(zt)
                        })), this.truncate = Ut((function(t, r, n) {
                            return z().arity("truncate", t, 1, 2).collectionName(r).options(n).validateAndReject().then((function() {
                                return e.provider.truncate(r, n)
                            })).then(zt)
                        })), this.bulkRemove = Ut((function(t, r, i, o) {
                            return z().arity("bulkRemove", t, 2, 3).collectionName(r).itemIds(i, r).options(o).validateAndReject().then((function() {
                                return e.provider.bulkRemove(r, i, o)
                            })).then(zt).then((function(t) {
                                var e = t.errors.map((function(t) {
                                    return new M(t.message, t.code, t.item, t.name, t.originalIndex)
                                }));
                                return (0, n.C3)((0, n.C3)({}, t), {
                                    errors: e
                                })
                            }))
                        })), this.save = Ut((function(t, r, n, i) {
                            return z().arity("save", t, 2, 3).validateAndReject().then((function() {
                                return Lt(e.provider, "save")(r, n, i)
                            }))
                        })), this.update = Ut((function(t, r, n, i) {
                            return z().arity("update", t, 2, 3).validateAndReject().then((function() {
                                return Lt(e.provider, "update")(r, n, i)
                            }))
                        })), this.fetch = Ut((function(t, r, i, o, a) {
                            return z().arity("fetch", t, 3, 4).isNonEmptyString(i, "cursor").validateAndReject().then((function() {
                                return e.provider.find(r, void 0, void 0, void 0, o, a, void 0, void 0, i)
                            })).then((function(t) {
                                return function(t, e, r, i, o, a) {
                                    var u = t.items,
                                        c = t.totalCount,
                                        s = t.partialIncludes,
                                        l = t.pagingMetadata || new yt,
                                        p = l.cursors,
                                        d = l.hasNext,
                                        f = void 0 !== d && d,
                                        h = At(e, r).limit(i),
                                        m = gt(null == p ? void 0 : p.next) || gt(null == p ? void 0 : p.prev) ? (0, n.C3)((0, n.C3)({}, o), {
                                            omitTotalCount: !0
                                        }) : o;
                                    return new jt({
                                        createdByCursor: a,
                                        items: u,
                                        totalCount: c,
                                        partialIncludes: s,
                                        cursors: p,
                                        query: h,
                                        pagingFunction: function() {
                                            return this.find(m)
                                        },
                                        hasNext: f
                                    })
                                }(t, e.provider, r, o, a)
                            }))
                        })), this.fetchReferenced = Ut((function(t, r, i, o, a) {
                            return z().arity("fetchReferenced", t, 3, 4).isNonEmptyString(i, "cursor").validateAndReject().then((function() {
                                var t = (0, n.C3)({}, a);
                                return t.limit = o, t.cursor = i, e.provider.queryReferenced(r, void 0, void 0, t).then((function(n) {
                                    return Mt(n, e.provider, r, void 0, void 0, t)
                                }))
                            }))
                        })), this.fetchAggregate = Ut((function(t, r, n, i, o) {
                            return z().arity("fetchAggregate", t, 3, 4).isNonEmptyString(n, "cursor").validateAndReject().then((function() {
                                return kt(e.provider, r, i, n).run(o)
                            }))
                        })), this.queryReferenced = Ut((function(t, r, n, i, o) {
                            return z().arity("queryReferenced", t, 3, 4).referenceParameter(n).validateAndReject().then((function() {
                                var t = Gt(n),
                                    a = o || {};
                                return e.provider.queryReferenced(r, t, i, a).then((function(n) {
                                    return Mt(n, e.provider, r, t, i, o)
                                }))
                            }))
                        })), this.insertReference = Ut((function(t, r, n, o, a, u) {
                            var c, s, l;
                            return (0, i.c7)(n) ? (s = n, c = o, l = function() {
                                return z().arity("insertReference", t, 2, 3).references(s).validateAndReject()
                            }) : (s = Qt(a).map((function(t) {
                                return {
                                    relationshipName: n,
                                    left: o,
                                    right: t
                                }
                            })), c = u, l = function() {
                                return z().arity("insertReference", t, 4, 5).references(s).validateAndReject()
                            }), l().then((function() {
                                return e.provider.insertReferences(r, function(t) {
                                    return t.map((function(t) {
                                        return {
                                            relationshipName: t.relationshipName,
                                            left: Gt(t.left),
                                            right: Gt(t.right)
                                        }
                                    }))
                                }(s), c)
                            }))
                        })), this.replaceReferences = Ut((function(t, r, n, i, o, a) {
                            return o = Qt(o).map(Gt), i = Gt(i), z().arity("replaceReferences", t, 4, 5).referenceParameter(i).referenceParameters(o).validateAndReject().then((function() {
                                return e.provider.replaceReferences(r, {
                                    relationshipName: n,
                                    left: i
                                }, o.map((function(t) {
                                    return {
                                        relationshipName: n,
                                        right: t,
                                        left: i
                                    }
                                })), a)
                            }))
                        })), this.removeReference = Ut((function(t, r, n, i, o, a) {
                            return o = Qt(o).map(Gt), i = Gt(i), z().arity("removeReference", t, 4, 5).referenceParameter(i).referenceRemoveParameters(o).validateAndReject().then((function() {
                                return 1 === o.length ? e.provider.removeReference(r, n, i, o[0], a) : e.provider.removeReferences(r, o.map((function(t) {
                                    return {
                                        relationshipName: n,
                                        right: t,
                                        left: i
                                    }
                                })), a)
                            }))
                        })), this.isReferenced = Ut((function(t, r, n, i, o, a) {
                            return z().arity("isReferenced", t, 4, 5).referenceParameter(i).referenceParameter(o).validateAndReject().then((function() {
                                return e.provider.isReferenced(r, n, Gt(i), Gt(o), a)
                            }))
                        })), this.bulkInsert = Ut((function(t, r, i, o) {
                            return z().arity("bulkInsert", t, 2, 3).validateAndReject().then((function() {
                                return e.provider.bulkInsert(r, i, o)
                            })).then((function(t) {
                                var e = t.errors.map((function(t) {
                                    return new M(t.message, t.code, t.item, t.name, t.originalIndex)
                                }));
                                return (0, n.C3)((0, n.C3)({}, t), {
                                    errors: e
                                })
                            }))
                        })), this.bulkSave = Ut((function(t, r, i, o) {
                            return z().arity("bulkSave", t, 2, 3).validateAndReject().then((function() {
                                return e.provider.bulkSave(r, i, o)
                            })).then((function(t) {
                                var e = t.errors.map((function(t) {
                                    return new M(t.message, t.code, t.item, t.name, t.originalIndex)
                                }));
                                return (0, n.C3)((0, n.C3)({}, t), {
                                    errors: e
                                })
                            }))
                        })), this.bulkUpdate = Ut((function(t, r, i, o) {
                            return z().arity("bulkUpdate", t, 2, 3).validateAndReject().then((function() {
                                return e.provider.bulkUpdate(r, i, o)
                            })).then((function(t) {
                                var e = t.errors.map((function(t) {
                                    return new M(t.message, t.code, t.item, t.name, t.originalIndex)
                                }));
                                return (0, n.C3)((0, n.C3)({}, t), {
                                    errors: e
                                })
                            }))
                        })), this.getSchema = function() {
                            return e.provider.getSchema()
                        }, this.group = function() {
                            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
                            return Pt.apply(void 0, t)
                        }, this.aggregate = function(t) {
                            return function(t, e) {
                                return new Tt({
                                    provider: t,
                                    collectionName: e
                                })
                            }(e.provider, t)
                        }, this.provider = t
                    }
                    return Object.defineProperty(t.prototype, "wixData", {
                        get: function() {
                            return this
                        },
                        enumerable: !1,
                        configurable: !0
                    }), t
                }(),
                qt = Bt;

            function Ut(t) {
                return function() {
                    for (var e = [], r = 0; r < arguments.length; r++) e[r] = arguments[r];
                    return t.apply(void 0, (0, n.Mt)([arguments], e, !1))
                }
            }

            function Lt(t, e, r) {
                return void 0 === r && (r = !1),
                    function(n, i, o) {
                        return z().collectionName(n).item(i, n, r).options(o).validateAndReject().then((function() {
                            return function(t) {
                                var e = Vt(t, (function(t) {
                                        return t.startsWith("$")
                                    })),
                                    r = Vt(t, (function(t) {
                                        return t.includes(".")
                                    }));
                                e && console.error("Data inserted contains field name prefixed with symbol '$'. It is not recommended to use such field names as it will not work with some data operations.");
                                r && console.warn("Data inserted contains field name containing symbol '.'. It is not recommended to use such field names as it will not work with some data operations.")
                            }(i)
                        })).then((function() {
                            return t[e](n, i, o)
                        })).then(zt).then((a = i, function(t) {
                            var e;
                            if (t) {
                                for (var r in t) t.hasOwnProperty(r) && (a.hasOwnProperty(r) && !0 !== (null === (e = Object.getOwnPropertyDescriptor(a, r)) || void 0 === e ? void 0 : e.writable) || (a[r] = t[r]));
                                for (var r in a) t.hasOwnProperty(r) || delete a[r];
                                return a
                            }
                        }));
                        var a
                    }
            }

            function zt(t) {
                return t && t.hasOwnProperty("item") ? t.item : t
            }

            function Qt(t) {
                return (0, i.c7)(t) ? t : [t]
            }

            function Gt(t) {
                return (0, i.Y9)(t) ? t._id : t
            }
            r(13648).mc;

            function Ht(t) {
                return "WDE0020" === t || "WDE0024" === t ? x.ValidationError : "WDE0025" === t ? x.SchemaDoesNotExist : "WDE0026" === t ? x.CollectionDeleted : "WDE0027" === t ? x.PermissionDenied : "WDE0052" === t ? x.SiteInTemplateMode : "WDE0073" === t ? x.ItemDoesNotExist : "WDE0074" === t ? x.ItemAlreadyExists : "WDE0022" === t || "WDE0007" === t ? x.ValidationError : t
            }
            var Yt = "WDE0078",
                Jt = "WDE0109",
                Xt = "WDE0080",
                Zt = function(t) {
                    return function(e) {
                        var r, i, o, a;
                        return t("wix-data-error-response", {
                            responseData: null === (r = null == e ? void 0 : e.response) || void 0 === r ? void 0 : r.data,
                            status: null === (i = null == e ? void 0 : e.response) || void 0 === i ? void 0 : i.status,
                            requestId: null === (a = null === (o = null == e ? void 0 : e.response) || void 0 === o ? void 0 : o.headers) || void 0 === a ? void 0 : a["x-wix-request-id"],
                            error: (null == e ? void 0 : e.response) ? void 0 : e
                        })((function() {
                            return Promise.resolve()
                        })).then((function() {
                            var t;
                            if (function(t) {
                                    var e;
                                    return 413 === (null === (e = null == t ? void 0 : t.response) || void 0 === e ? void 0 : e.status)
                                }(e)) return R(W(), Jt);
                            var r = null === (t = null == e ? void 0 : e.response) || void 0 === t ? void 0 : t.data;
                            return Kt(r) ? function(t) {
                                var e = t.details.applicationError.data;
                                if (null == e ? void 0 : e.jsErrorValue) {
                                    var r = e.jsErrorValue,
                                        n = r.name,
                                        i = r.message,
                                        o = r.code,
                                        a = new Error(i);
                                    return a.name = n, a.code = o, a
                                }
                                return null == e ? void 0 : e.value
                            }(r) : function(t) {
                                var e;
                                return null === (e = null == t ? void 0 : t.details) || void 0 === e ? void 0 : e.applicationError
                            }(r) ? te(r) : function(t) {
                                var e;
                                return null === (e = null == t ? void 0 : t.details) || void 0 === e ? void 0 : e.validationError
                            }(r) ? function(t) {
                                var e = (t.details.validationError.fieldViolations || []).map((function(t) {
                                        return "".concat(t.field, ": ").concat(t.description)
                                    })),
                                    r = (0, n.Mt)([t.message], e, !0).join("\n");
                                return R(r, Xt, t.details)
                            }(r) : R(D("Unknown error."), x.UnknownError)
                        })).then((function(t) {
                            return Promise.reject(t)
                        }))
                    }
                };

            function Kt(t) {
                var e, r;
                return (null === (r = null === (e = null == t ? void 0 : t.details) || void 0 === e ? void 0 : e.applicationError) || void 0 === r ? void 0 : r.code) === Yt
            }
            var te = function(t) {
                var e = Ht(t.details.applicationError.code);
                return R(t.details.applicationError.description, e, t.details)
            };
            var ee = function(t) {
                return function(e) {
                    var r = function(t) {
                        var e, r, n, i = null === (e = t.details) || void 0 === e ? void 0 : e.applicationError;
                        if (Kt(t)) {
                            var o = null === (r = i.data) || void 0 === r ? void 0 : r.jsErrorValue;
                            if (o) return {
                                message: o.message,
                                code: o.code,
                                name: o.name
                            };
                            var a = null === (n = i.data) || void 0 === n ? void 0 : n.value;
                            return "string" == typeof a ? {
                                message: a
                            } : {}
                        }
                        return {
                            code: Ht(null == i ? void 0 : i.code) || x.UnknownError,
                            message: (null == i ? void 0 : i.description) || t.message,
                            name: "Error"
                        }
                    }(e);
                    return {
                        message: r.message,
                        code: r.code,
                        name: r.name,
                        originalIndex: e.originalIndex,
                        item: t[e.originalIndex]
                    }
                }
            };
            var re = function() {
                    return function(t) {
                        return t()
                    }
                },
                ne = function(t) {
                    return "object" == typeof t && null !== t && "get" in t && "function" == typeof t.get
                },
                ie = function() {
                    function t(t) {
                        var e = t.cloudDataUrl,
                            r = void 0 === e ? "/_api/cloud-data" : e,
                            n = t.gridAppId,
                            i = t.segment,
                            o = t.httpClient,
                            a = t.authHeader,
                            u = t.traceWith,
                            c = void 0 === u ? re : u;
                        this.cloudDataUrl = r, this.gridAppId = n, this.segment = i, this.httpClientProvider = "function" == typeof o ? o : function() {
                            return o
                        }, this.traceWith = c, this.authHeader = a
                    }
                    return t.prototype.insert = function(t, e, r) {
                        var n = this;
                        return this._traceWith("platformized-provider-insert", {
                            collectionName: t
                        })((function() {
                            return z().collectionName(t).item(e, t, !1).options(r).validateAndReject().then((function() {
                                return n._post("/v1/wix-data/collections/insert", {
                                    collectionName: t,
                                    item: e,
                                    options: n._optionsWithPlugins(r)
                                })
                            }))
                        }))
                    }, t.prototype.update = function(t, e, r) {
                        var n = this;
                        return this._traceWith("platformized-provider-update", {
                            collectionName: t
                        })((function() {
                            return z().collectionName(t).item(e, t, !1).options(r).validateAndReject().then((function() {
                                return n._post("/v1/wix-data/collections/update", {
                                    collectionName: t,
                                    item: e,
                                    options: n._optionsWithPlugins(r)
                                })
                            }))
                        }))
                    }, t.prototype.save = function(t, e, r) {
                        var n = this;
                        return this._traceWith("platformized-provider-save", {
                            collectionName: t
                        })((function() {
                            return z().collectionName(t).item(e, t, !1).options(r).validateAndReject().then((function() {
                                return n._post("/v1/wix-data/collections/save", {
                                    collectionName: t,
                                    item: e,
                                    options: n._optionsWithPlugins(r)
                                })
                            }))
                        }))
                    }, t.prototype.truncate = function(t, e) {
                        var r = this;
                        return this._traceWith("platformized-provider-truncate", {
                            collectionName: t
                        })((function() {
                            return z().collectionName(t).truncateOptions(e).validateAndReject().then((function() {
                                return r._post("/v1/wix-data/collections/truncate", {
                                    collectionName: t,
                                    options: r._optionsWithPlugins(e)
                                })
                            })).then((function() {
                                return Promise.resolve(null)
                            }))
                        }))
                    }, t.prototype.remove = function(t, e, r) {
                        var n = this;
                        return this._traceWith("platformized-provider-remove", {
                            collectionName: t
                        })((function() {
                            return z().collectionName(t).itemId(e).options(r).validateAndReject().then((function() {
                                return n._post("/v1/wix-data/collections/remove", {
                                    collectionName: t,
                                    itemId: e,
                                    options: n._optionsWithPlugins(r)
                                })
                            })).catch((function(t) {
                                return t && t.code === x.ItemDoesNotExist ? Promise.resolve(null) : Promise.reject(t)
                            }))
                        }))
                    }, t.prototype.bulkRemove = function(t, e, r) {
                        var n = this;
                        return this._traceWith("platformized-provider-bulk-remove", {
                            collectionName: t
                        })((function() {
                            return z().collectionName(t).itemIds(e, t).bulkRemoveOptions(r).validateAndReject().then((function() {
                                return 0 === e.length ? {
                                    removedItemIds: [],
                                    errors: []
                                } : n._post("/v1/wix-data/collections/bulk-remove", {
                                    collectionName: t,
                                    entries: e.map((function(t) {
                                        return {
                                            itemId: t
                                        }
                                    })),
                                    options: n._optionsWithPlugins(r)
                                })
                            })).then((function(t) {
                                var r = t.removedItemIds,
                                    n = t.errors;
                                return {
                                    removedItemIds: r,
                                    removed: r.length,
                                    skipped: e.length - r.length - n.length,
                                    errors: n.map(ee(e))
                                }
                            })).catch((function(t) {
                                return t && t.code === x.ItemDoesNotExist ? Promise.resolve(null) : Promise.reject(t)
                            }))
                        }))
                    }, t.prototype.get = function(t, e, r) {
                        var n = this;
                        return this._traceWith("platformized-provider-get", {
                            collectionName: t,
                            itemId: e
                        })((function() {
                            return z().collectionName(t).itemId(e).options(r).validateAndReject().then((function() {
                                return n._post("/v1/wix-data/collections/get", {
                                    collectionName: t,
                                    itemId: e,
                                    options: n._optionsWithPlugins(r)
                                })
                            })).catch((function(t) {
                                return t && t.code === x.ItemDoesNotExist ? Promise.resolve(null) : Promise.reject(t)
                            }))
                        }))
                    }, t.prototype.find = function(t, e, r, n, i, o, a, u, c, s) {
                        var l = this;
                        return this._traceWith("platformized-provider-find", {
                            collectionName: t
                        })((function() {
                            return z().collectionName(t).options(o).validateAndReject().then((function() {
                                return l._validateOrderBy(t, r)
                            })).then((function() {
                                return l._validateFilter(t, e)
                            })).then((function() {
                                return l._post("/v1/wix-data/collections/query", {
                                    collectionName: t,
                                    dataQuery: l._getDataQuery(e, r, i, n, c, s),
                                    options: l._optionsWithPlugins(o),
                                    includeReferencedItems: a,
                                    omitTotalCount: u
                                })
                            })).then((function(t) {
                                var e = t.items,
                                    r = t.partialIncludes,
                                    n = t.pagingMetadata;
                                return {
                                    items: e,
                                    partialIncludes: r,
                                    totalCount: n.total,
                                    pagingMetadata: n
                                }
                            }))
                        }))
                    }, t.prototype.runAggregate = function(t, e, r, o, a) {
                        var u = this;
                        return this._traceWith("platformized-provider-aggregate", {
                            collectionName: t
                        })((function() {
                            return z().collectionName(t).options(o).validateAndReject().then((function() {
                                var c = (0, i.op)(e);
                                return u._post("/v1/wix-data/collections/aggregate", (0, n.C3)({
                                    collectionName: t,
                                    initialFilter: c.preFilteringStep,
                                    aggregation: c.processingStep,
                                    finalFilter: c.postFilteringStep,
                                    sort: u._platformizedSort(e),
                                    options: u._optionsWithPlugins(o)
                                }, u._getAggregatePaging(e, r, a))).then((function(t) {
                                    var e = t.items,
                                        r = t.pagingMetadata,
                                        n = r.cursors;
                                    return {
                                        items: e,
                                        hasNext: r.hasNext,
                                        cursors: n
                                    }
                                }))
                            }))
                        }))
                    }, t.prototype._optionsWithPlugins = function(t) {
                        var e = t || {};
                        return e.showDrafts ? (0, n.C3)((0, n.C3)({}, e), {
                            pluginOptions: {
                                showDrafts: !0
                            }
                        }) : e
                    }, t.prototype._platformizedSort = function(t) {
                        var e = t.find((function(t) {
                            return t.hasOwnProperty("$sort")
                        }));
                        if (e) return e.$sort.map((function(t) {
                            var e = Object.entries(t)[0];
                            return {
                                fieldName: e[0],
                                order: "asc" === e[1] ? 0 : 1
                            }
                        }))
                    }, t.prototype._getDataQuery = function(t, e, r, i, o, a) {
                        return (0, n.C3)((0, n.C3)({
                            filter: t,
                            sort: e ? this._mapOrderToSort(e) : void 0
                        }, this._getPaging(r, i, o)), {
                            fields: a
                        })
                    }, t.prototype._getAggregatePaging = function(t, e, r) {
                        var n = t.find((function(t) {
                                return t.hasOwnProperty("$skip")
                            })),
                            i = void 0 !== n ? n.$skip : void 0;
                        return this._getPaging(e, i, r)
                    }, t.prototype._getPaging = function(t, e, r) {
                        if (r && e > 0) throw R(k(), x.ValidationError);
                        return r ? {
                            cursorPaging: {
                                limit: t,
                                cursor: r
                            }
                        } : {
                            paging: {
                                offset: e,
                                limit: t
                            }
                        }
                    }, t.prototype.count = function(t, e, r) {
                        var n = this;
                        return this._traceWith("platformized-provider-count", {
                            collectionName: t
                        })((function() {
                            return z().collectionName(t).options(r).validateAndReject().then((function() {
                                return n._validateFilter(t, e)
                            })).then((function() {
                                return n._post("/v1/wix-data/collections/count", {
                                    collectionName: t,
                                    filter: e,
                                    options: n._optionsWithPlugins(r)
                                })
                            }))
                        }))
                    }, t.prototype.distinct = function(t, e, r, n, i, o, a, u, c, s) {
                        var l = this;
                        return this._traceWith("platformized-provider-distinct", {
                            collectionName: t
                        })((function() {
                            return z().collectionName(t).options(a).validateAndReject().then((function() {
                                return l._validateOrderBy(t, r)
                            })).then((function() {
                                return l._validateFilter(t, e)
                            })).then((function() {
                                return l._post("/v1/wix-data/collections/distinct", {
                                    collectionName: t,
                                    dataQuery: l._getDataQuery(e, r, o, i, u, c),
                                    propertyName: n,
                                    options: l._optionsWithPlugins(a),
                                    omitTotalCount: s
                                })
                            })).then((function(t) {
                                var e = t.items,
                                    r = t.pagingMetadata;
                                return {
                                    items: e,
                                    totalCount: r.total,
                                    pagingMetadata: r
                                }
                            }))
                        }))
                    }, t.prototype.bulkInsert = function(t, e, r) {
                        var n = this;
                        return this._traceWith("platformized-provider-bulk-insert", {
                            collectionName: t
                        })((function() {
                            var i = (r || {}).overrideExisting;
                            return z().collectionName(t).items(e, t).bulkInsertOptions(r).validateAndReject().then((function() {
                                return 0 === e.length ? {
                                    insertedItemIds: [],
                                    errors: []
                                } : n._post("/v1/wix-data/collections/bulk-insert", {
                                    collectionName: t,
                                    items: e,
                                    options: n._optionsWithPlugins(r)
                                })
                            })).then((function(t) {
                                var r = t.insertedItemIds,
                                    n = t.errors;
                                return {
                                    insertedItemIds: r,
                                    inserted: r.length,
                                    skipped: i ? 0 : e.length - r.length - n.length,
                                    updated: i ? e.length - r.length - n.length : 0,
                                    errors: n.map(ee(e))
                                }
                            }))
                        }))
                    }, t.prototype.bulkSave = function(t, e, r) {
                        var n = this;
                        return this._traceWith("platformized-provider-bulk-save", {
                            collectionName: t
                        })((function() {
                            return z().collectionName(t).items(e, t).bulkInsertOptions(r).validateAndReject().then((function() {
                                return 0 === e.length ? {
                                    insertedItemIds: [],
                                    updatedItemIds: [],
                                    errors: []
                                } : n._post("/v1/wix-data/collections/bulk-save", {
                                    collectionName: t,
                                    items: e,
                                    options: n._optionsWithPlugins(r)
                                })
                            })).then((function(t) {
                                var r = t.insertedItemIds,
                                    n = t.updatedItemIds,
                                    i = t.errors;
                                return {
                                    insertedItemIds: r,
                                    updatedItemIds: n,
                                    inserted: r.length,
                                    skipped: e.length - r.length - n.length - i.length,
                                    updated: n.length,
                                    errors: i.map(ee(e))
                                }
                            }))
                        }))
                    }, t.prototype.bulkUpdate = function(t, e, r) {
                        var n = this;
                        return this._traceWith("platformized-provider-bulk-update", {
                            collectionName: t
                        })((function() {
                            return z().collectionName(t).items(e, t).bulkUpdateOptions(r).validateAndReject().then((function() {
                                return 0 === e.length ? {
                                    updatedItemIds: [],
                                    errors: []
                                } : n._post("/v1/wix-data/collections/bulk-update", {
                                    collectionName: t,
                                    items: e,
                                    options: n._optionsWithPlugins(r)
                                })
                            })).then((function(t) {
                                var r = t.updatedItemIds,
                                    n = t.errors;
                                return {
                                    updatedItemIds: r,
                                    inserted: 0,
                                    skipped: e.length - r.length - n.length,
                                    updated: r.length,
                                    errors: n.map(ee(e))
                                }
                            }))
                        }))
                    }, t.prototype.queryReferenced = function(t, e, r, i) {
                        var o = this;
                        return this._traceWith("platformized-provider-query-referenced", {
                            collectionName: t,
                            order: i.order,
                            skip: i.skip,
                            limit: i.limit,
                            cursorExists: i.cursor ? "true" : "false"
                        })((function() {
                            var a = ((i = i || {}).order || "ASC").toUpperCase(),
                                u = i.skip || 0,
                                c = i.limit || 50,
                                s = i.cursor,
                                l = i.omitTotalCount || !1;
                            return z().collectionName(t).options(i).validateAndReject().then((function() {
                                return o._post("/v1/wix-data/collections/query-referenced", (0, n.C3)((0, n.C3)({
                                    collectionName: t,
                                    propertyName: r,
                                    referringItemId: e,
                                    order: a
                                }, o._getPaging(c, u, s)), {
                                    omitTotalCount: l,
                                    options: o._optionsWithPlugins(i)
                                }))
                            })).then((function(t) {
                                var e = t.items,
                                    r = t.pagingMetadata;
                                return {
                                    items: e,
                                    totalCount: r.total,
                                    pagingMetadata: r
                                }
                            }))
                        }))
                    }, t.prototype.insertReference = function(t, e, r, n, i) {
                        var o = this;
                        return this._traceWith("platformized-provider-insert-reference", {
                            collectionName: t
                        })((function() {
                            return o.insertReferences(t, [{
                                relationshipName: e,
                                left: r,
                                right: n
                            }], i)
                        }))
                    }, t.prototype.insertReferences = function(t, e, r) {
                        var n = this;
                        return this._traceWith("platformized-provider-insert-references", {
                            collectionName: t
                        })((function() {
                            return z().collectionName(t).options(r).validateAndReject().then((function() {
                                return n._post("/v1/wix-data/collections/bulk-insert-references", {
                                    collectionName: t,
                                    references: e.map((function(t) {
                                        return {
                                            propertyName: t.relationshipName,
                                            referringItemId: t.left,
                                            referencedItemId: t.right
                                        }
                                    })),
                                    options: n._optionsWithPlugins(r)
                                })
                            }))
                        }))
                    }, t.prototype.replaceReferences = function(t, e, r, n) {
                        var i = this;
                        return this._traceWith("platformized-provider-replace-references", {
                            collectionName: t
                        })((function() {
                            return z().collectionName(t).options(n).validateAndReject().then((function() {
                                return i._post("/v1/wix-data/collections/bulk-replace-references", {
                                    collectionName: t,
                                    propertyName: e.relationshipName,
                                    referringItemId: e.left,
                                    newReferencedItemIds: r.map((function(t) {
                                        return t.right
                                    })),
                                    options: i._optionsWithPlugins(n)
                                })
                            }))
                        }))
                    }, t.prototype.removeReference = function(t, e, r, n, i) {
                        var o = this;
                        return this._traceWith("platformized-provider-remove-reference", {
                            collectionName: t
                        })((function() {
                            return o.removeReferences(t, [{
                                relationshipName: e,
                                left: r,
                                right: n
                            }], i)
                        }))
                    }, t.prototype.removeReferences = function(t, e, r) {
                        var n = this;
                        return this._traceWith("platformized-provider-remove-references", {
                            collectionName: t
                        })((function() {
                            return z().collectionName(t).options(r).validateAndReject().then((function() {
                                return n._post("/v1/wix-data/collections/bulk-remove-references", {
                                    collectionName: t,
                                    references: e.map((function(t) {
                                        return {
                                            propertyName: t.relationshipName,
                                            referringItemId: t.left,
                                            referencedItemId: t.right
                                        }
                                    })),
                                    options: n._optionsWithPlugins(r)
                                })
                            }))
                        }))
                    }, t.prototype.isReferenced = function(t, e, r, n, i) {
                        var o = this;
                        return this._traceWith("platformized-provider-is-referenced", {
                            collectionName: t
                        })((function() {
                            return z().collectionName(t).options(i).validateAndReject().then((function() {
                                return o._post("/v1/wix-data/collections/is-referenced", {
                                    collectionName: t,
                                    propertyName: e,
                                    referringItemId: r,
                                    referencedItemId: n,
                                    options: o._optionsWithPlugins(i)
                                })
                            })).then((function(t) {
                                return t.isReferenced
                            }))
                        }))
                    }, t.prototype._mapOrderToSort = function(t) {
                        return t.flatMap((function(t) {
                            return Object.entries(t).map((function(t) {
                                return {
                                    fieldName: t[0],
                                    order: t[1].toUpperCase()
                                }
                            }))
                        }))
                    }, t.prototype._validateOrderBy = function(t, e) {
                        var r;
                        if ([null, void 0].includes(e)) return Promise.resolve();
                        if (r = e, !(0, i.c7)(r)) return Promise.reject(this._validationError(t, [function(t) {
                            return T.sortModelType(t)
                        }(e)]));
                        var n = e.flatMap((function(t) {
                            return function(t) {
                                return !(0, i.Y9)(t)
                            }(t) ? function(t) {
                                return T.sortModelItemType(t)
                            }(t) : function(t) {
                                var e = Object.values(t);
                                return !(1 === e.length && ("asc" === e[0] || "desc" === e[0]))
                            }(t) ? function(t) {
                                return T.sortModelItem(t)
                            }(t) : []
                        }));
                        return n.length ? Promise.reject(this._validationError(t, n)) : Promise.resolve()
                    }, t.prototype._validateFilter = function(t, e) {
                        var r = P.objectType,
                            o = P.arrayType,
                            a = P.arrayLength,
                            u = P.comparisonOperatorType,
                            c = P.stringOperatorType,
                            s = P.setOperatorItems,
                            l = P.inOperatorItems,
                            p = P.matchesOperatorRequiredProperty,
                            d = P.matchesOperatorIgnoreCase,
                            f = P.matchesOperatorSpecItems,
                            h = P.regexNotAllowed,
                            m = function(t, e) {
                                return void 0 === e || (0, i.Y9)(e) ? [] : [r(t, e)]
                            },
                            v = function(t, e) {
                                return (0, i.c7)(e) ? e.flatMap((function(e) {
                                    return m(t, e)
                                })) : []
                            },
                            g = function(t, e) {
                                return void 0 === e || (0, i.c7)(e) ? [] : [o(t, e)]
                            },
                            y = function(t, e) {
                                return void 0 === e || (0, i.L7)(e) || (0, i.Ib)(e) || (0, i.It)(e) ? [] : [u(t, e)]
                            },
                            b = function(t, e) {
                                return void 0 === e || (0, i.L7)(e) ? [] : [c(t, e)]
                            },
                            N = function(t, e) {
                                return (0, i.c7)(e) ? e.every((function(t) {
                                    return (0, i.It)(t) || (0, i.L7)(t) || (0, i.Ib)(t)
                                })) ? [] : [s(t, e)] : []
                            },
                            _ = function(t, e, r) {
                                return (0, i.c7)(e) ? e.length === r ? [] : [a(t, r, e)] : []
                            },
                            I = function(t) {
                                if (!(0, i.Y9)(t)) return [];
                                if (void 0 === t.ignoreCase) return [p("ignoreCase", t)];
                                if (!0 !== t.ignoreCase) return [d(t.ignoreCase)];
                                if (void 0 === t.spec) return [p("spec", t)];
                                if (!(0, i.c7)(t.spec)) return [o("$matches.spec", t.spec)];
                                var e = t.spec.find((function(t) {
                                    return ! function(t) {
                                        return !!(0, i.Y9)(t) && ("anyOf" === t.type && " \t\n-" === t.value || !("literal" !== t.type || !(0, i.L7)(t.value)))
                                    }(t)
                                }));
                                return void 0 !== e ? [f(e)] : []
                            },
                            A = function(t) {
                                if (!(0, i.Y9)(t)) return [];
                                var e, r = t.$and,
                                    o = t.$or,
                                    a = t.$not,
                                    u = t.$gt,
                                    c = t.$gte,
                                    s = t.$lt,
                                    p = t.$lte,
                                    d = t.$startsWith,
                                    f = t.$endsWith,
                                    j = t.$contains,
                                    O = t.$hasSome,
                                    E = t.$hasAll,
                                    C = t.$in,
                                    w = t.$matches,
                                    P = t.$regex,
                                    S = (0, n.sX)(t, ["$and", "$or", "$not", "$gt", "$gte", "$lt", "$lte", "$startsWith", "$endsWith", "$contains", "$hasSome", "$hasAll", "$in", "$matches", "$regex"]),
                                    T = [].concat(g("$and", r)).concat(v("Filter Model", r)).concat(g("$or", o)).concat(v("Filter Model", o)).concat(g("$not", a)).concat(v("Filter Model", a)).concat(g("$hasSome", O)).concat(g("$hasAll", E)).concat(g("$in", C)).concat(N("$hasSome", O)).concat(N("$hasAll", E)).concat(y("$gt", u)).concat(y("$gte", c)).concat(y("$lt", s)).concat(y("$lte", p)).concat(b("$startsWith", d)).concat(b("$endsWith", f)).concat(b("$contains", j)).concat(_("$not", a, 1)).concat(_("$in", C, 2)).concat((e = C, (0, i.c7)(e) ? 2 !== e.length || (0, i.L7)(e[0]) && (0, i.Ib)(e[1]) ? [] : [l(e)] : [])).concat(m("$matches", w)).concat(I(w)).concat(function(t) {
                                        return void 0 === t ? [] : [h()]
                                    }(P));
                                return T.length || (T = [].concat(r ? r.flatMap(A) : []).concat(o ? o.flatMap(A) : []).concat(a ? a.flatMap(A) : [])).length ? T : Object.values(S).flatMap(A)
                            };
                        if ([null, void 0].includes(e)) return Promise.resolve();
                        if (!(0, i.Y9)(e)) return Promise.reject(this._validationError(t, [r("Filter Model", e)]));
                        var j = A(e);
                        return j.length ? Promise.reject(this._validationError(t, j)) : Promise.resolve()
                    }, t.prototype._validationError = function(t, e) {
                        return $(E.queryInvalid(t, e))
                    }, t.prototype._getAuthHeader = function() {
                        return Promise.resolve(ne(this.authHeader) ? this.authHeader.get() : this.authHeader)
                    }, t.prototype._post = function(t, e) {
                        var r = this;
                        return Promise.all([this._getGridAppId(), this._getAuthHeader()]).then((function(n) {
                            var o = n[0],
                                a = n[1];
                            return r.traceWith("wix-data-api-call", {
                                url: "".concat(r.cloudDataUrl).concat(t),
                                options: JSON.stringify(e.options)
                            })((function() {
                                var n, u = (0, i.uE)(Object.assign(e, {
                                        segment: r.segment.toUpperCase(),
                                        appId: o
                                    })),
                                    c = a ? {
                                        authorization: a
                                    } : {};
                                return r.httpClientProvider(e.options).post("".concat(r.cloudDataUrl).concat(t), u, {
                                    headers: c
                                }).catch(Zt(r.traceWith)).then((n = r.traceWith, function(t) {
                                    var e;
                                    return n("platformized-data-response", {
                                        requestId: null === (e = t.headers) || void 0 === e ? void 0 : e["x-wix-request-id"]
                                    })((function() {
                                        return (0, i.LX)(t.data)
                                    }))
                                }))
                            }))
                        }))
                    }, t.prototype._getGridAppId = function() {
                        return Promise.resolve(ne(this.gridAppId) ? this.gridAppId.get() : this.gridAppId)
                    }, t.prototype._traceWith = function(t, e) {
                        var r = this;
                        return function(i) {
                            return r._getGridAppId().then((function(o) {
                                return r.traceWith(t, (0, n.C3)({
                                    gridAppId: o,
                                    segment: r.segment
                                }, e))(i)
                            }))
                        }
                    }, t
                }(),
                oe = function() {
                    return function(t) {
                        return t()
                    }
                };

            function ae(t) {
                var e = t.cloudDataUrl,
                    r = void 0 === e ? "/_api/cloud-data" : e,
                    n = t.gridAppId,
                    i = t.segment,
                    o = t.httpClient,
                    a = t.authHeader,
                    u = t.traceWith;
                return new qt(new ie({
                    cloudDataUrl: r,
                    gridAppId: n,
                    segment: i,
                    httpClient: o,
                    authHeader: a,
                    traceWith: void 0 === u ? oe : u
                }))
            }
            const ue = "data";

            function ce({
                featureConfig: t,
                platformUtils: e,
                appEssentials: r
            }) {
                const n = {
                        get() {
                            return e.sessionService.getWixCodeInstance()
                        }
                    },
                    {
                        gridAppId: i,
                        segment: o,
                        cloudDataUrl: a
                    } = t,
                    {
                        httpClient: u
                    } = r;
                return {
                    [ue]: ae({
                        cloudDataUrl: a,
                        httpClient: u,
                        gridAppId: i,
                        segment: o,
                        authHeader: n
                    })
                }
            }
        }
    }
]);
//# sourceMappingURL=feature-data-wix-code-sdk.b909f2ab.chunk.min.js.map