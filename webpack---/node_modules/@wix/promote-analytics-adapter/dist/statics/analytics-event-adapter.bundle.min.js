! function(e, n) {
    "object" == typeof exports && "object" == typeof module ? module.exports = n() : "function" == typeof define && define.amd ? define("promote-analytics-adapter", [], n) : "object" == typeof exports ? exports["promote-analytics-adapter"] = n() : e["promote-analytics-adapter"] = n()
}("undefined" != typeof self ? self : this, (function() {
    return function() {
        var e = {
                694: function(e) {
                    e.exports = function(e, n, t) {
                        return n in e ? Object.defineProperty(e, n, {
                            value: t,
                            enumerable: !0,
                            configurable: !0,
                            writable: !0
                        }) : e[n] = t, e
                    }, e.exports.default = e.exports, e.exports.__esModule = !0
                },
                2: function(e) {
                    function n() {
                        return e.exports = n = Object.assign || function(e) {
                            for (var n = 1; n < arguments.length; n++) {
                                var t = arguments[n];
                                for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r])
                            }
                            return e
                        }, e.exports.default = e.exports, e.exports.__esModule = !0, n.apply(this, arguments)
                    }
                    e.exports = n, e.exports.default = e.exports, e.exports.__esModule = !0
                },
                794: function(e) {
                    e.exports = function(e, n) {
                        if (null == e) return {};
                        var t, r, o = {},
                            i = Object.keys(e);
                        for (r = 0; r < i.length; r++) t = i[r], n.indexOf(t) >= 0 || (o[t] = e[t]);
                        return o
                    }, e.exports.default = e.exports, e.exports.__esModule = !0
                }
            },
            n = {};

        function t(r) {
            var o = n[r];
            if (void 0 !== o) return o.exports;
            var i = n[r] = {
                exports: {}
            };
            return e[r](i, i.exports, t), i.exports
        }
        t.n = function(e) {
            var n = e && e.__esModule ? function() {
                return e.default
            } : function() {
                return e
            };
            return t.d(n, {
                a: n
            }), n
        }, t.d = function(e, n) {
            for (var r in n) t.o(n, r) && !t.o(e, r) && Object.defineProperty(e, r, {
                enumerable: !0,
                get: n[r]
            })
        }, t.o = function(e, n) {
            return Object.prototype.hasOwnProperty.call(e, n)
        }, t.r = function(e) {
            "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
                value: "Module"
            }), Object.defineProperty(e, "__esModule", {
                value: !0
            })
        };
        var r = {};
        return function() {
            "use strict";
            t.r(r), t.d(r, {
                api: function() {
                    return e
                },
                channelNames: function() {
                    return je
                },
                listeners: function() {
                    return Be
                }
            });
            var e = {};
            t.r(e), t.d(e, {
                addListener: function() {
                    return Je
                },
                init: function() {
                    return ze
                },
                trackEvent: function() {
                    return $e
                },
                trackEventToChannelsOnly: function() {
                    return He
                },
                trackEventToEssentialsOnly: function() {
                    return Ze
                },
                trackEventToListenersOnly: function() {
                    return Qe
                }
            });
            var n, o = t(694),
                i = t.n(o),
                c = t(2),
                a = t.n(c),
                u = new Uint8Array(16);

            function s() {
                if (!n && !(n = "undefined" != typeof crypto && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || "undefined" != typeof msCrypto && "function" == typeof msCrypto.getRandomValues && msCrypto.getRandomValues.bind(msCrypto))) throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
                return n(u)
            }
            var d = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;
            for (var v = function(e) {
                    return "string" == typeof e && d.test(e)
                }, p = [], f = 0; f < 256; ++f) p.push((f + 256).toString(16).substr(1));
            var l = function(e) {
                var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                    t = (p[e[n + 0]] + p[e[n + 1]] + p[e[n + 2]] + p[e[n + 3]] + "-" + p[e[n + 4]] + p[e[n + 5]] + "-" + p[e[n + 6]] + p[e[n + 7]] + "-" + p[e[n + 8]] + p[e[n + 9]] + "-" + p[e[n + 10]] + p[e[n + 11]] + p[e[n + 12]] + p[e[n + 13]] + p[e[n + 14]] + p[e[n + 15]]).toLowerCase();
                if (!v(t)) throw TypeError("Stringified UUID is invalid");
                return t
            };
            var m = function(e, n, t) {
                    var r = (e = e || {}).random || (e.rng || s)();
                    if (r[6] = 15 & r[6] | 64, r[8] = 63 & r[8] | 128, n) {
                        t = t || 0;
                        for (var o = 0; o < 16; ++o) n[t + o] = r[o];
                        return n
                    }
                    return l(r)
                },
                y = t(794),
                g = t.n(y),
                _ = ["appDefId"],
                h = function(e, n, t, r) {
                    var o = a()({}, t, {
                        _internalEventId: m()
                    });
                    e.forEach((function(e) {
                        (function(e, n, t, r) {
                            void 0 === t && (t = {});
                            var o = t,
                                i = o.appDefId,
                                c = g()(o, _);
                            return n.events ? ((r = r || {}).config = n.config, r.context = r.context || {}, "boolean" == typeof r.context && (r.context = {
                                isFirstVisit: r.context
                            }), r.context.appDefId = r.context.appDefId || i, n.events[e] ? n.events[e](c, r) : []) : r && r.preventDefaultChannels ? [] : [
                                [e, c].concat(r ? [r] : [])
                            ]
                        })(n, e, o, r).forEach((function(n) {
                            return e.report.apply(e, n)
                        }))
                    }))
                },
                C = {
                    STORES: "Stores"
                },
                I = function(e, n) {
                    var t = Object.keys(e);
                    return 0 === t.length ? e : t.reduce((function(t, r) {
                        var o = n[r];
                        return o && (e[r] || 0 === e[r]) && (t[o] = e[r]), t
                    }), {})
                };

            function A(e) {
                return e.origin === C.STORES && !e.id
            }
            var E = ["type"],
                b = ["id"],
                k = ["id"],
                P = ["event", "eventAction"],
                T = {
                    id: "id",
                    price: "value",
                    value: "value",
                    revenue: "value",
                    name: "content_name",
                    category: "content_category",
                    currency: "currency",
                    content_ids: "content_ids",
                    contents: "contents",
                    type: "content_type",
                    num_items: "num_items",
                    quantity: "quantity",
                    label: "content_name"
                },
                O = function(e) {
                    var n = e.type,
                        t = void 0 === n ? "product" : n,
                        r = g()(e, E),
                        o = a()({}, r, {
                            type: t
                        });
                    return o.contents && (o.contents = o.contents.map((function(e) {
                        return a()({}, e, {
                            quantity: e.quantity || 1,
                            item_price: e.item_price || e.price || 0
                        })
                    })), o.price || o.value || o.revenue || (o.price = function(e) {
                        return (Number.parseFloat(e.tax) || 0) + (Number.parseFloat(e.shipping) || 0) + e.contents.reduce((function(e, n) {
                            return e + Number.parseFloat(n.item_price) * n.quantity
                        }), 0)
                    }(o).toString()), o.currency || (o.currency = function(e) {
                        return e.contents && e.contents[0].currency
                    }(o))), I(o, T)
                },
                w = function(e) {
                    if (e.contents && !e.num_items) {
                        var n = a()({}, e);
                        return n.num_items = n.contents.reduce((function(e, n) {
                            return e + (n.quantity || 1)
                        }), 0), n
                    }
                    return e
                },
                x = {
                    ViewContent: function(e) {
                        var n = e.id,
                            t = g()(e, b);
                        return [
                            ["track", "ViewContent", a()({}, O(t), {
                                content_ids: [n],
                                content_type: "product"
                            }), {
                                eventID: t._internalEventId
                            }]
                        ]
                    },
                    AddToCart: function(e) {
                        var n = e.id,
                            t = g()(e, k);
                        return [
                            ["track", "AddToCart", a()({}, O(t), {
                                content_ids: [n],
                                content_type: "product"
                            }), {
                                eventID: t._internalEventId
                            }]
                        ]
                    },
                    InitiateCheckout: function(e) {
                        return [
                            ["track", "InitiateCheckout", a()({}, O(w(e)), e.contents && {
                                content_ids: e.contents.map((function(e) {
                                    return e.id
                                })),
                                content_type: "product"
                            }), {
                                eventID: e._internalEventId
                            }]
                        ]
                    },
                    AddPaymentInfo: function(e) {
                        return [
                            ["track", "AddPaymentInfo", a()({}, O(w(e)), e.contents && {
                                content_ids: e.contents.map((function(e) {
                                    return e.id
                                })),
                                content_type: "product"
                            }), {
                                eventID: e._internalEventId
                            }]
                        ]
                    },
                    Purchase: function(e, n) {
                        if (n.isFBServerEventsEnabled) {
                            var t = a()({}, O(w(e)), e.contents && {
                                    content_ids: e.contents.map((function(e) {
                                        return e.id
                                    })),
                                    content_type: "product"
                                }),
                                r = function(e) {
                                    return e.origin === C.STORES ? e.orderId : e._internalEventId
                                }(e),
                                o = ["track", "Purchase", a()({}, t), {
                                    eventID: r
                                }],
                                i = ["trackCustom", "WixOrderPlaced", a()({}, t), {
                                    eventID: r
                                }];
                            return [].concat(A(e) ? [] : [o], [i])
                        }
                        return [
                            ["track", "Purchase", a()({}, O(w(e)), e.contents && {
                                content_ids: e.contents.map((function(e) {
                                    return e.id
                                })),
                                content_type: "product"
                            }), {
                                eventID: e._internalEventId
                            }]
                        ]
                    },
                    Lead: function(e) {
                        return [
                            ["track", "Lead", I(e, T), {
                                eventID: e._internalEventId
                            }]
                        ]
                    },
                    Schedule: function(e) {
                        return [
                            ["track", "Schedule", {}, {
                                eventID: e._internalEventId
                            }]
                        ]
                    },
                    CompleteRegistration: function(e) {
                        return [
                            ["track", "CompleteRegistration", {}, {
                                eventID: e._internalEventId
                            }]
                        ]
                    },
                    CustomEvent: function(e) {
                        var n = e.event,
                            t = e.eventAction;
                        return [
                            ["trackCustom", n || (void 0 === t ? "customEvent" : t), g()(e, P), {
                                eventID: e._internalEventId
                            }]
                        ]
                    }
                },
                L = ["event", "eventAction"],
                S = {
                    price: "price",
                    sku: "id",
                    id: "id",
                    currency: "currency",
                    name: "name",
                    category: "category",
                    brand: "brand",
                    variant: "variant",
                    list: "list",
                    quantity: "quantity",
                    step: "step",
                    option: "option",
                    position: "position",
                    coupon: "coupon",
                    affiliation: "affiliation",
                    revenue: "revenue",
                    tax: "tax",
                    shipping: "shipping"
                };
            ! function() {
                for (var e = 1; e <= 200; e++) S["dimension" + e] = "dimension" + e, S["metric" + e] = "metric" + e
            }();
            var G = function(e) {
                    return e ? "Enhanced Ecommerce - " + e : "Enhanced Ecommerce"
                },
                N = {
                    PageView: function(e, n) {
                        var t = void 0 === e ? {} : e,
                            r = t.pagePath,
                            o = t.pageTitle;
                        return (void 0 === n ? {} : n).reportToManagedChannels ? [
                            ["send", "pageview", a()({
                                page: r
                            }, o ? {
                                title: o
                            } : {})]
                        ] : []
                    },
                    AddProductImpression: function(e) {
                        var n = (e.contents || []).map((function(e) {
                            return ["ec:addImpression", I(e, S)]
                        }));
                        return [
                            ["require", "ec"]
                        ].concat(n).concat([
                            ["send", "event", G(e.origin), "Product Impressions", {
                                nonInteraction: !0
                            }]
                        ])
                    },
                    ClickProduct: function(e) {
                        var n = e.name ? e.name : "(not set)",
                            t = e.list ? e.list : "(not set)";
                        return [
                            ["require", "ec"]
                        ].concat([
                            ["ec:addProduct", I(e, S)]
                        ]).concat([
                            ["ec:setAction", "click", {
                                list: t
                            }]
                        ]).concat([
                            ["send", "event", G(e.origin), "Product Click", n]
                        ])
                    },
                    ViewContent: function(e) {
                        var n = e.name ? e.name : "(not set)";
                        return [
                            ["require", "ec"]
                        ].concat([
                            ["ec:addImpression", I(e, S)]
                        ]).concat([
                            ["ec:setAction", "detail"]
                        ]).concat([
                            ["send", "event", G(e.origin), "View Content", n, {
                                nonInteraction: !0
                            }]
                        ])
                    },
                    AddToCart: function(e) {
                        var n = e.name ? e.name : "(not set)";
                        return [
                            ["require", "ec"]
                        ].concat([
                            ["ec:addProduct", I(e, S)]
                        ]).concat([
                            ["ec:setAction", "add"]
                        ]).concat([
                            ["send", "event", G(e.origin), "Add to Cart", n]
                        ])
                    },
                    RemoveFromCart: function(e) {
                        var n = e.name ? e.name : "(not set)";
                        return [
                            ["require", "ec"]
                        ].concat([
                            ["ec:addProduct", I(e, S)]
                        ]).concat([
                            ["ec:setAction", "remove"]
                        ]).concat([
                            ["send", "event", G(e.origin), "Remove from Cart", n]
                        ])
                    },
                    InitiateCheckout: function(e) {
                        var n = (e.contents || []).map((function(e) {
                                return ["ec:addProduct", I(e, S)]
                            })),
                            t = I({
                                option: e.option
                            }, S);
                        return [
                            ["require", "ec"]
                        ].concat(n).concat([
                            ["ec:setAction", "checkout", t]
                        ]).concat([
                            ["send", "event", G(e.origin), "Initiate Checkout"]
                        ])
                    },
                    StartPayment: function(e) {
                        var n = I({
                            step: 1,
                            option: e.option
                        }, S);
                        return [
                            ["require", "ec"]
                        ].concat([
                            ["ec:setAction", "checkout_option", n]
                        ]).concat([
                            ["send", "event", G(e.origin), "Start Payment"]
                        ])
                    },
                    AddPaymentInfo: function(e) {
                        var n = I({
                            step: 2,
                            option: e.option
                        }, S);
                        return [
                            ["require", "ec"]
                        ].concat([
                            ["ec:setAction", "checkout_option", n]
                        ]).concat([
                            ["send", "event", G(e.origin), "Add Payment Info"]
                        ])
                    },
                    CheckoutStep: function(e) {
                        var n = I({
                            step: e.step || 3,
                            option: e.option
                        }, S);
                        return [
                            ["require", "ec"]
                        ].concat([
                            ["ec:setAction", "checkout_option", n]
                        ]).concat([
                            ["send", "event", G(e.origin), "Checkout Step " + n.step]
                        ])
                    },
                    Purchase: function(e) {
                        var n = (e.contents || []).map((function(e) {
                                return ["ec:addProduct", I(e, S)]
                            })),
                            t = {};
                        return ["id", "affiliation", "revenue", "tax", "shipping", "coupon"].forEach((function(n) {
                            return e[n] && (t[n] = e[n])
                        })), [
                            ["require", "ec"]
                        ].concat(n).concat([
                            ["ec:setAction", "purchase", I(t, S)]
                        ]).concat([
                            ["send", "event", G(e.origin), "Purchase"]
                        ])
                    },
                    Lead: function(e) {
                        var n = e.category,
                            t = void 0 === n ? "Leads" : n,
                            r = e.action,
                            o = void 0 === r ? "Submitted" : r,
                            i = e.label;
                        return [
                            ["send", "event", t, o, void 0 === i ? "New Lead" : i]
                        ]
                    },
                    CustomEvent: function(e) {
                        var n = e.event,
                            t = void 0 === n ? "customEvent" : n,
                            r = e.eventAction,
                            o = g()(e, L);
                        return "pageview" === t.toLowerCase() ? [
                            ["send", "pageview", I(o, S)]
                        ] : [
                            ["send", "event", a()({
                                eventAction: r || t
                            }, o)]
                        ]
                    }
                },
                R = ["list", "origin"],
                D = ["list", "origin"],
                V = ["origin"],
                M = ["origin"],
                q = ["contents", "origin"],
                F = ["event", "eventLabel", "eventCategory"],
                j = {
                    type: "type",
                    price: "price",
                    sku: "sku",
                    id: "id",
                    currency: "currency",
                    name: "name",
                    category: "category",
                    brand: "brand",
                    variant: "variant",
                    list: "list",
                    quantity: "quantity",
                    step: "step",
                    option: "option",
                    position: "position",
                    coupon: "coupon",
                    affiliation: "affiliation",
                    revenue: "revenue",
                    tax: "tax",
                    shipping: "shipping",
                    buyerMail: "buyer_email",
                    buyerId: "buyer_id"
                },
                K = function(e) {
                    return e ? "Enhanced Ecommerce - " + e : "Enhanced Ecommerce"
                },
                Y = function(e) {
                    return e || "(not set)"
                },
                X = {
                    PageView: function(e, n) {
                        var t = void 0 === e ? {} : e,
                            r = t.pagePath,
                            o = t.pageTitle;
                        return (void 0 === n ? {} : n).reportToManagedChannels ? [
                            [
                                [{
                                    event: "Pageview",
                                    url: r,
                                    title: o
                                }]
                            ]
                        ] : []
                    },
                    AddProductImpression: function(e) {
                        var n = e.contents,
                            t = e.origin,
                            r = n;
                        return [
                            [
                                [a()({
                                    event: "productImpression"
                                }, t && {
                                    origin: t
                                }, {
                                    event_category: K(t),
                                    ecommerce: {
                                        impressions: r
                                    }
                                })]
                            ]
                        ]
                    },
                    ClickProduct: function(e) {
                        var n = e.list,
                            t = void 0 === n ? "(not set)" : n,
                            r = e.origin,
                            o = g()(e, R);
                        return [
                            [
                                [a()({
                                    event: "productClick"
                                }, r && {
                                    origin: r
                                }, {
                                    event_label: Y(o.name),
                                    event_category: K(r),
                                    ecommerce: {
                                        click: {
                                            actionField: {
                                                list: t
                                            },
                                            products: [I(o, j)]
                                        }
                                    }
                                })]
                            ]
                        ]
                    },
                    ViewContent: function(e) {
                        var n = e.list,
                            t = void 0 === n ? "(not set)" : n,
                            r = e.origin,
                            o = g()(e, D);
                        return [
                            [
                                [a()({
                                    event: "viewContent"
                                }, r && {
                                    origin: r
                                }, {
                                    event_label: Y(o.name),
                                    event_category: K(r),
                                    ecommerce: {
                                        detail: {
                                            actionField: {
                                                list: t
                                            },
                                            products: [I(o, j)]
                                        }
                                    }
                                })]
                            ]
                        ]
                    },
                    AddToCart: function(e) {
                        var n = e.origin,
                            t = g()(e, V);
                        return [
                            [
                                [a()({
                                    event: "addToCart"
                                }, n && {
                                    origin: n
                                }, {
                                    event_label: Y(t.name),
                                    event_category: K(n),
                                    ecommerce: {
                                        add: {
                                            products: [I(t, j)]
                                        }
                                    }
                                })]
                            ]
                        ]
                    },
                    RemoveFromCart: function(e) {
                        var n = e.origin,
                            t = g()(e, M);
                        return [
                            [
                                [a()({
                                    event: "removeFromCart"
                                }, n && {
                                    origin: n
                                }, {
                                    event_label: Y(t.name),
                                    event_category: K(n),
                                    ecommerce: {
                                        remove: {
                                            products: [I(t, j)]
                                        }
                                    }
                                })]
                            ]
                        ]
                    },
                    InitiateCheckout: function(e) {
                        var n = e.contents,
                            t = void 0 === n ? [] : n,
                            r = e.origin,
                            o = e.option,
                            i = [].concat(t),
                            c = Object.assign({}, o && {
                                option: o
                            });
                        return [
                            [
                                [a()({
                                    event: "checkout"
                                }, r && {
                                    origin: r
                                }, {
                                    event_category: K(r),
                                    ecommerce: {
                                        checkout: {
                                            actionField: c,
                                            products: i
                                        }
                                    }
                                })]
                            ]
                        ]
                    },
                    StartPayment: function(e) {
                        var n = e.origin;
                        return [
                            [
                                [a()({
                                    event: "checkoutOption"
                                }, n && {
                                    origin: n
                                }, {
                                    event_category: K(n),
                                    ecommerce: {
                                        checkout_option: {
                                            actionField: {
                                                step: 1
                                            }
                                        }
                                    }
                                })]
                            ]
                        ]
                    },
                    AddPaymentInfo: function(e) {
                        var n = e.origin,
                            t = e.option,
                            r = Object.assign({
                                step: 2
                            }, t && {
                                option: t
                            });
                        return [
                            [
                                [a()({
                                    event: "checkoutOption"
                                }, n && {
                                    origin: n
                                }, {
                                    event_category: K(n),
                                    ecommerce: {
                                        checkout_option: {
                                            actionField: r
                                        }
                                    }
                                })]
                            ]
                        ]
                    },
                    CheckoutStep: function(e) {
                        var n = e.step,
                            t = void 0 === n ? 3 : n,
                            r = e.origin,
                            o = e.option,
                            i = Object.assign({
                                step: t
                            }, o && {
                                option: o
                            });
                        return [
                            [
                                [a()({
                                    event: "checkoutOption"
                                }, r && {
                                    origin: r
                                }, {
                                    event_category: K(r),
                                    ecommerce: {
                                        checkout_option: {
                                            actionField: i
                                        }
                                    }
                                })]
                            ]
                        ]
                    },
                    Purchase: function(e) {
                        var n = e.contents,
                            t = void 0 === n ? [] : n,
                            r = e.origin,
                            o = g()(e, q),
                            i = [].concat(t),
                            c = {},
                            u = I(o, j);
                        return ["id", "affiliation", "revenue", "tax", "shipping", "coupon", "buyer_id", "buyer_email"].forEach((function(e) {
                            return u[e] && (c[e] = u[e])
                        })), [
                            [
                                [a()({
                                    event: "purchase"
                                }, r && {
                                    origin: r
                                }, {
                                    event_category: K(r),
                                    ecommerce: {
                                        purchase: {
                                            actionField: c,
                                            products: i
                                        }
                                    }
                                })]
                            ]
                        ]
                    },
                    Lead: function(e) {
                        var n = e.category,
                            t = void 0 === n ? "Leads" : n,
                            r = e.label;
                        return [
                            [
                                [{
                                    event: "lead",
                                    event_label: void 0 === r ? "New Lead" : r,
                                    event_category: t
                                }]
                            ]
                        ]
                    },
                    CustomEvent: function(e) {
                        var n = e.event,
                            t = void 0 === n ? "customEvent" : n,
                            r = e.eventLabel,
                            o = e.eventCategory,
                            i = g()(e, F);
                        return [
                            [
                                [a()({
                                    event: t,
                                    event_label: r,
                                    event_category: o
                                }, i)]
                            ]
                        ]
                    }
                };

            function B(e) {
                return void 0 === e && (e = ""), "object" == typeof e && (e instanceof Number || e instanceof Boolean || e instanceof String ? e = e.valueOf() : null !== e && (e = JSON.stringify(e))), e
            }

            function W(e) {
                var n = e;
                return "string" == typeof n && (n = parseFloat(e)), "number" != typeof n || isNaN(n) ? e : Math.round(1e4 * n)
            }
            var U = ["event", "targetTable"],
                z = {
                    PageView: {
                        table: "page_views",
                        paramsMap: {
                            pageId: "page_id",
                            pageNumber: "page_number"
                        }
                    },
                    AddProductImpression: {},
                    ClickProduct: {},
                    ViewContent: {},
                    AddToCart: {},
                    RemoveFromCart: {},
                    InitiateCheckout: {},
                    AddPaymentInfo: {},
                    Purchase: {},
                    Lead: {
                        name: function(e) {
                            var n, t = e.label;
                            return (n = t) && ("" + n).replace(/\s/g, "")
                        },
                        table: "lead_events"
                    }
                };

            function J(e) {
                return Object.keys(e).reduce((function(n, t) {
                    return n[t] = B(e[t]), n
                }), {})
            }

            function $(e, n, t, r, o) {
                void 0 === t && (t = {}), void 0 === r && (r = {});
                var i = {
                    evt: e,
                    evn: n,
                    data: J(t)
                };
                return r.context && r.context.appDefId && (i.appId = r.context.appDefId), o && (i.tbl = o), [
                    [i]
                ]
            }

            function H(e, n, t, r) {
                var o = function(e, n) {
                    return Object.entries(e).reduce((function(e, t) {
                        var r = t[0],
                            o = t[1];
                        return n.includes(r) || (e[r] = o), e
                    }), {})
                }(n, ["_internalEventId", "visitorId"]);
                return $("p", e, o, t, r)
            }
            var Q = Object.keys(z).reduce((function(e, n) {
                    var t = z[n],
                        r = t.name,
                        o = t.table,
                        i = t.paramsMap;
                    return e[n] = function(e, t) {
                        return void 0 === e && (e = {}), "function" == typeof r && (r = r(e)), i && (e = Object.keys(i).reduce((function(n, t) {
                            return n[i[t]] = e[t], n
                        }), {})), H(r = r || n, e, t, o)
                    }, e
                }), {
                    CustomEvent: function(e, n) {
                        var t = e.event,
                            r = e.targetTable;
                        return function(e, n, t, r) {
                            return $("c", e, n, t, r)
                        }(t, g()(e, U), n, r)
                    }
                }),
                Z = {
                    page: ["pageId", "pageNumber", "viewer", "pageType", "pageApp", "pageTypeIdentifier"],
                    product: ["id", "sku", "name", "category", "price", "currency", "brand", "variant", "list", "position"],
                    productList: ["contents"],
                    payment: ["option"],
                    purchase: ["id", "affiliation", "revenue", "tax", "shipping", "coupon", "contents", "orderId"],
                    CompleteRegistration: ["method", "origin"]
                },
                ee = {
                    PageView: {
                        params: {
                            evid: 1109
                        },
                        fields: Z.page
                    },
                    AddProductImpression: {
                        params: {
                            evid: 1100
                        },
                        fields: Z.productList
                    },
                    ClickProduct: {
                        params: {
                            evid: 1101
                        },
                        fields: Z.product
                    },
                    ViewContent: {
                        params: {
                            evid: 1102
                        },
                        fields: Z.product
                    },
                    AddToCart: {
                        params: {
                            evid: 1103
                        },
                        fields: [].concat(Z.product, ["quantity"])
                    },
                    RemoveFromCart: {
                        params: {
                            evid: 1104
                        },
                        fields: [].concat(Z.product, ["quantity"])
                    },
                    InitiateCheckout: {
                        params: {
                            evid: 1105
                        },
                        fields: Z.productList
                    },
                    AddPaymentInfo: {
                        params: {
                            evid: 1106
                        },
                        fields: Z.payment
                    },
                    Purchase: {
                        params: {
                            evid: 1107
                        },
                        fields: Z.purchase
                    },
                    Lead: {
                        params: {
                            evid: 1108
                        },
                        fields: []
                    },
                    Schedule: {
                        params: {
                            evid: 1110
                        },
                        fields: []
                    },
                    CompleteRegistration: {
                        params: {
                            evid: 1111
                        },
                        fields: Z.CompleteRegistration
                    }
                },
                ne = {
                    pageId: function(e) {
                        return {
                            name: "pid",
                            value: e
                        }
                    },
                    pageNumber: function(e) {
                        return {
                            name: "pn",
                            value: e
                        }
                    },
                    viewer: function(e) {
                        return {
                            name: "viewer",
                            value: e || "unknown"
                        }
                    },
                    pageType: function(e) {
                        return {
                            name: "pt",
                            value: e
                        }
                    },
                    pageApp: function(e) {
                        return {
                            name: "pa",
                            value: e
                        }
                    },
                    pageTypeIdentifier: function(e) {
                        return {
                            name: "pti",
                            value: e
                        }
                    },
                    price: function(e) {
                        return {
                            name: "price",
                            value: W(e)
                        }
                    },
                    revenue: function(e) {
                        return {
                            name: "revenue",
                            value: W(e)
                        }
                    },
                    tax: function(e) {
                        return {
                            name: "tax",
                            value: W(e)
                        }
                    },
                    shipping: function(e) {
                        return {
                            name: "shipping",
                            value: W(e)
                        }
                    },
                    orderId: function(e) {
                        return {
                            name: "orderGuid",
                            value: e
                        }
                    }
                };
            var te = Object.keys(ee).reduce((function(e, n) {
                    return e[n] = function(e, t) {
                        void 0 === e && (e = {}), void 0 === t && (t = {});
                        var r = a()({
                            src: 76
                        }, ee[n].params, function(e, n) {
                            return e.reduce((function(e, t) {
                                var r = function(e, n, t) {
                                        return "function" == typeof e[n] ? e[n](t) : {
                                            name: n,
                                            value: t
                                        }
                                    }(ne, t, n[t]),
                                    o = r.name,
                                    i = r.value;
                                return e[o] = B(i), e
                            }), {})
                        }(ee[n].fields, e));
                        return t.context && t.context.appDefId && (r.appId = t.context.appDefId), t.preventDefaultChannels ? [] : ("Purchase" === n && (r.features = B({
                            reportedToFBonClient: !A(e)
                        })), [
                            [r]
                        ])
                    }, e
                }), {}),
                re = ["GA_TRACKING_ID"],
                oe = {
                    GA_TRACKING_ID: "GA_TRACKING_ID",
                    pagePath: "page_path",
                    pageTitle: "page_title"
                };
            ! function() {
                for (var e = 1; e <= 200; e++) oe["dimension" + e] = "dimension" + e, oe["metric" + e] = "metric" + e
            }();
            var ie, ce, ae, ue, se, de = {
                    PageView: function(e, n) {
                        var t = n.config,
                            r = e.GA_TRACKING_ID,
                            o = g()(e, re);
                        return [
                            ["config", r || t.trackingId, I(o, oe)]
                        ]
                    }
                },
                ve = ["currency"],
                pe = ["currency"],
                fe = ["currency"],
                le = ["currency"],
                me = ["currency"],
                ye = ["option"],
                ge = ["option"],
                _e = ["step", "option"],
                he = ["revenue", "id", "currency", "coupon"],
                Ce = ["event", "eventAction", "eventCategory", "eventLabel"],
                Ie = {
                    price: "price",
                    id: "id",
                    currency: "currency",
                    name: "name",
                    category: "category",
                    brand: "brand",
                    variant: "variant",
                    list: "list_name",
                    quantity: "quantity",
                    step: "checkout_step",
                    option: "checkout_option",
                    position: "list_position",
                    coupon: "coupon",
                    affiliation: "affiliation",
                    revenue: "value",
                    tax: "tax",
                    sku: "sku",
                    shipping: "shipping"
                },
                Ae = function(e) {
                    return e.contents && e.contents[0].currency
                },
                Ee = function(e) {
                    var n = e.contents;
                    return (void 0 === n ? [] : n).map((function(e) {
                        e.currency;
                        var n = g()(e, ve);
                        return I(n, Ie)
                    }))
                },
                be = function(e) {
                    var n = e.origin;
                    return n ? "Enhanced Ecommerce - " + n : "Enhanced Ecommerce"
                },
                ke = function(e) {
                    var n = e.name;
                    return n || "(not set)"
                },
                Pe = {
                    PageView: function(e) {
                        return [
                            ["event", "page_view", {
                                page_path: e.pagePath,
                                page_title: e.pageTitle
                            }]
                        ]
                    },
                    AddProductImpression: function(e) {
                        return [
                            ["event", "view_item_list", {
                                event_action: "Product Impressions",
                                event_category: be(e),
                                items: Ee(e)
                            }]
                        ]
                    },
                    ClickProduct: function(e) {
                        e.currency;
                        var n = g()(e, pe);
                        return [
                            ["event", "select_content", {
                                event_action: "Product Click",
                                event_category: be(n),
                                event_label: ke(n),
                                content_type: "product",
                                items: [I(n, Ie)]
                            }]
                        ]
                    },
                    ViewContent: function(e) {
                        e.currency;
                        var n = g()(e, fe);
                        return [
                            ["event", "view_item", {
                                event_action: "View Content",
                                event_category: be(n),
                                event_label: ke(n),
                                items: [I(n, Ie)]
                            }]
                        ]
                    },
                    AddToCart: function(e) {
                        var n = e.currency,
                            t = g()(e, le);
                        return [
                            ["event", "add_to_cart", {
                                currency: n,
                                event_action: "Add to Cart",
                                event_category: be(t),
                                event_label: ke(t),
                                items: [I(t, Ie)]
                            }]
                        ]
                    },
                    RemoveFromCart: function(e) {
                        var n = e.currency,
                            t = g()(e, me);
                        return [
                            ["event", "remove_from_cart", {
                                currency: n,
                                event_action: "Remove from Cart",
                                event_category: be(t),
                                event_label: ke(t),
                                items: [I(t, Ie)]
                            }]
                        ]
                    },
                    InitiateCheckout: function(e) {
                        return [
                            ["event", "begin_checkout", {
                                currency: Ae(e),
                                event_action: "Initiate Checkout",
                                event_category: be(e),
                                items: Ee(e)
                            }]
                        ]
                    },
                    StartPayment: function(e) {
                        var n = e.option,
                            t = g()(e, ye);
                        return [
                            ["event", "checkout_progress", a()({}, I({
                                step: 3,
                                option: n
                            }, Ie), {
                                event_action: "Start Payment",
                                event_category: be(t),
                                currency: Ae(t),
                                items: Ee(t)
                            })]
                        ]
                    },
                    AddPaymentInfo: function(e) {
                        var n = e.option,
                            t = g()(e, ge);
                        return [
                            ["event", "add_payment_info", a()({}, I({
                                step: 4,
                                option: n
                            }, Ie), {
                                event_action: "Add Payment Info",
                                event_category: be(t)
                            })]
                        ]
                    },
                    CheckoutStep: function(e) {
                        var n = e.step,
                            t = void 0 === n ? 5 : n,
                            r = e.option,
                            o = g()(e, _e);
                        return [
                            ["event", "checkout_progress", a()({}, I({
                                step: t,
                                option: r
                            }, Ie), {
                                event_action: "Checkout Step " + t,
                                event_category: be(o),
                                currency: Ae(o),
                                items: Ee(o)
                            })]
                        ]
                    },
                    Purchase: function(e) {
                        var n = e.revenue,
                            t = e.id,
                            r = e.currency,
                            o = e.coupon,
                            i = g()(e, he);
                        return [
                            ["event", "purchase", a()({}, I({
                                revenue: n,
                                id: t,
                                currency: r,
                                coupon: o
                            }, Ie), {
                                transaction_id: t,
                                event_action: "Purchase",
                                event_category: be(i),
                                items: Ee(i)
                            })]
                        ]
                    },
                    Lead: function(e) {
                        var n = e.category,
                            t = void 0 === n ? "Leads" : n,
                            r = e.action,
                            o = void 0 === r ? "Submitted" : r,
                            i = e.label;
                        return [
                            ["event", "generate_lead", {
                                event_category: t,
                                event_action: o,
                                event_label: void 0 === i ? "New Lead" : i
                            }]
                        ]
                    },
                    CustomEvent: function(e) {
                        var n = e.event,
                            t = void 0 === n ? "customEvent" : n,
                            r = e.eventAction,
                            o = e.eventCategory,
                            i = e.eventLabel,
                            c = g()(e, Ce);
                        return [
                            ["event", r || t, a()({}, c, {
                                event_category: o,
                                event_label: i
                            })]
                        ]
                    }
                },
                Te = [],
                Oe = {
                    PageView: function(e, n) {
                        var t = (void 0 === n ? {} : n).context;
                        return t && t.isFirstVisit ? Te : [
                            []
                        ]
                    }
                },
                we = ["currency"],
                xe = ["currency"],
                Le = {
                    id: "content_id",
                    name: "content_name",
                    quantity: "quantity",
                    category: "content_category",
                    price: "price"
                },
                Se = function(e) {
                    return void 0 === e && (e = []), e.map((function(e) {
                        return a()({}, I(e, Le), {
                            content_type: "product"
                        })
                    }))
                },
                Ge = function(e) {
                    var n;
                    return void 0 === e && (e = {}), Number.parseFloat(e.price) * (null != (n = e.quantity) ? n : 1)
                },
                Ne = function(e) {
                    return void 0 === e && (e = []), e.reduce((function(e, n) {
                        return e + Ge(n)
                    }), 0)
                },
                Re = function(e) {
                    var n, t;
                    return e.currency || (null == (n = e.contents) || null == (t = n[0]) ? void 0 : t.currency)
                },
                De = {
                    PageView: function() {
                        return [
                            ["Pageview"]
                        ]
                    },
                    ViewContent: function(e) {
                        var n = e.currency,
                            t = g()(e, we);
                        return [
                            ["ViewContent", a()({}, I(t, Le), {
                                content_type: "product",
                                currency: n,
                                value: Ge(t)
                            })]
                        ]
                    },
                    AddToCart: function(e) {
                        var n = e.currency,
                            t = g()(e, xe);
                        return [
                            ["AddToCart", a()({}, I(t, Le), {
                                content_type: "product",
                                currency: n,
                                value: Ge(t)
                            })]
                        ]
                    },
                    InitiateCheckout: function(e) {
                        return [
                            ["InitiateCheckout", {
                                contents: Se(e.contents),
                                currency: Re(e),
                                value: Ne(e.contents)
                            }]
                        ]
                    },
                    Purchase: function(e) {
                        return [
                            ["CompletePayment", {
                                contents: Se(e.contents),
                                currency: Re(e),
                                value: Ne(e.contents)
                            }]
                        ]
                    },
                    Schedule: function() {
                        return [
                            ["Contact"]
                        ]
                    },
                    Lead: function(e) {
                        var n = e.category;
                        return ["get-subscribers" === n ? ["Subscribe"] : "normal" === n || "payment-form" === n ? ["SubmitForm"] : "registration-form" === n ? ["CompleteRegistration"] : []]
                    }
                },
                Ve = {},
                Me = function(e, n) {
                    var t, r;
                    t = Ve, r = e, Object.prototype.hasOwnProperty.call(t, r) || (Ve[e] = n)
                },
                qe = function(e, n) {
                    Object.keys(Ve).forEach((function(t) {
                        Ve[t].call(undefined, e, function(e) {
                            return Object.assign({}, e, ce)
                        }(n))
                    }))
                },
                Fe = function(e, n) {
                    void 0 === n && (n = {}), ie && ie(e, n)
                };
            var je = {
                    FACEBOOK_PIXEL: "facebookPixel",
                    GOOGLE_ANALYTICS: "googleAnalytics",
                    GOOGLE_TAG_MANAGER: "googleTagManager",
                    GOOGLE_ANALYTICS_CONSENT_MODE: "googleAnalyticsConsentMode",
                    GOOGLE_TAG_MANAGER_CONSENT_MODE: "googleTagManagerConsentMode",
                    WIX_ANALYTICS: "wixAnalytics",
                    BI_ANALYTICS: "biAnalytics",
                    GTAG: "gtag",
                    GLOBAL_GTAG: "globalGtag",
                    VK_RETARGETING: "vkRetargeting",
                    YANDEX_METRICA: "yandexMetrica",
                    TIKTOK_PIXEL: "tiktokPixel",
                    WIX_DEVELOPERS_ANALYTICS: "wix-developers-analytics"
                },
                Ke = ((ae = {})[je.GOOGLE_ANALYTICS_CONSENT_MODE] = Pe, ae[je.GOOGLE_TAG_MANAGER_CONSENT_MODE] = X, ae),
                Ye = ((ue = {})[je.FACEBOOK_PIXEL] = x, ue[je.GOOGLE_ANALYTICS] = N, ue[je.GOOGLE_TAG_MANAGER] = X, ue[je.WIX_ANALYTICS] = Q, ue[je.BI_ANALYTICS] = te, ue[je.GTAG] = de, ue[je.GLOBAL_GTAG] = Pe, ue[je.VK_RETARGETING] = {
                    PageView: function() {
                        return [
                            []
                        ]
                    }
                }, ue[je.YANDEX_METRICA] = Oe, ue[je.TIKTOK_PIXEL] = De, ue),
                Xe = a()({}, Ke, Ye),
                Be = ((se = {})[je.WIX_DEVELOPERS_ANALYTICS] = function(e, n) {
                    if (e) {
                        if (window) {
                            window.wixDevelopersAnalytics = window.wixDevelopersAnalytics || {
                                register: Me,
                                triggerEvent: Fe
                            }, "function" == typeof window.onWixDevelopersAnalyticsReady && window.onWixDevelopersAnalyticsReady();
                            try {
                                window.dispatchEvent(new Event("wixDevelopersAnalyticsReady"))
                            } catch (e) {}
                        }
                        return ie = e, ce = function(e) {
                            return {
                                isPremium: (n = e, t = void 0 === n ? {} : n, r = t.isPremium, o = t.isPremiumDomain, i = t.isPremiumUser, r && r() || o && o() || i && i()),
                                userId: e.getUserId(),
                                metaSiteId: e.getMetaSiteId()
                            };
                            var n, t, r, o, i
                        }(n), qe
                    }
                }, se),
                We = function() {
                    function e(e) {
                        var n = this;
                        void 0 === e && (e = []), i()(this, "_channels", []), i()(this, "_listeners", []), i()(this, "addChannel", (function(e) {
                            n.isChannelAlreadyInit(e) || (n.isChannelPredefined(e) ? n.populateChannelEvents(e) : n.registerChannel(e), n.isChannelValid(e) && n._channels.push(e))
                        })), i()(this, "addListener", (function(e, t) {
                            void 0 === t && (t = {}), Array.isArray(e) && e.forEach((function(e) {
                                if (n.isListenerInitializerValid(e)) {
                                    var r = e(n.trackEvent, t);
                                    r && !n.isListenerAlreadyInit(r) && n._listeners.push(r)
                                }
                            }))
                        })), i()(this, "trackEvent", (function(e, t, r) {
                            h([].concat(n._channels, n.getReporters()), e, t, r)
                        })), i()(this, "trackEventToListenersOnly", (function(e, t, r) {
                            h(n.getReporters(), e, t, r)
                        })), i()(this, "trackEventToChannelsOnly", (function(e, t, r) {
                            h(n._channels.filter((function(e) {
                                return !Ke[e.name]
                            })), e, t, r)
                        })), i()(this, "trackEventToEssentialsOnly", (function(e, t, r) {
                            h(n._channels.filter((function(e) {
                                return Ke[e.name]
                            })), e, t, r)
                        })), i()(this, "getReporters", (function() {
                            return n._listeners.map((function(e) {
                                return {
                                    report: e
                                }
                            }))
                        })), i()(this, "isChannelAlreadyInit", (function(e) {
                            return n._channels.some((function(n) {
                                return n.name === e.name
                            }))
                        })), i()(this, "isListenerAlreadyInit", (function(e) {
                            return n._listeners.some((function(n) {
                                return n === e
                            }))
                        })), i()(this, "isListenerInitializerValid", (function(e) {
                            return e && e instanceof Function
                        })), e.forEach(this.addChannel)
                    }
                    var n = e.prototype;
                    return n.isChannelPredefined = function(e) {
                        return Xe[e.name]
                    }, n.populateChannelEvents = function(e) {
                        e.events = Xe[e.name], e.events.publicTracking && e.events.publicTracking instanceof Function && e.events.publicTracking()
                    }, n.isChannelValid = function(e) {
                        var n = e.name,
                            t = e.report,
                            r = e.events && Object.values(e.events).every((function(e) {
                                return "function" == typeof e
                            }));
                        return n && t && r
                    }, n.registerChannel = function(e) {
                        this.isChannelValid(e) && (Xe[e.name] = e.events)
                    }, e
                }(),
                Ue = new We,
                ze = function(e) {
                    void 0 === e && (e = []), e.forEach(Ue.addChannel)
                },
                Je = function(e, n) {
                    Ue.addListener(e, n)
                },
                $e = function(e, n, t) {
                    Ue.trackEvent(e, n, t)
                },
                He = function(e, n, t) {
                    Ue.trackEventToChannelsOnly(e, n, t)
                },
                Qe = function(e, n, t) {
                    Ue.trackEventToListenersOnly(e, n, t)
                },
                Ze = function(e, n, t) {
                    Ue.trackEventToEssentialsOnly(e, n, t)
                }
        }(), r
    }()
}));
//# sourceMappingURL=analytics-event-adapter.bundle.min.js.map